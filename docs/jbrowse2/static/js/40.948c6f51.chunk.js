(this["webpackJsonp@jbrowse/web"]=this["webpackJsonp@jbrowse/web"]||[]).push([[40],{2504:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return k}));var n=r(88),a=r(87),c=r.n(a),s=r(91),i=r(86),u=r(90),o=r(93),d=r(95),l=r(1266),f=r.n(l),p=r(127),b=r(129),h=r(140),v=r(135),m=r(816),g=r(81),j=r(815),k=function(e){Object(o.a)(r,e);var t=Object(d.a)(r);function r(e){var n;Object(i.a)(this,r),(n=t.call(this,e)).parser=void 0,n.bed=void 0,n.columnNames=void 0,n.scoreColumn=void 0;var a=Object(g.readConfObject)(e,"bedGzLocation"),c=Object(g.readConfObject)(e,"index"),s=Object(g.readConfObject)(e,"autoSql"),u=c.location,o=c.indexType;return n.bed=new m.TabixIndexedFile({filehandle:Object(b.openLocation)(a),csiFilehandle:"CSI"===o?Object(b.openLocation)(u):void 0,tbiFilehandle:"CSI"!==o?Object(b.openLocation)(u):void 0,chunkCacheSize:50*Math.pow(2,20)}),n.columnNames=Object(g.readConfObject)(e,"columnNames"),n.scoreColumn=Object(g.readConfObject)(e,"scoreColumn"),n.parser=new f.a({autoSql:s}),n}return Object(u.a)(r,[{key:"getRefNames",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",this.bed.getReferenceSequenceNames(t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeader",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.bed.getHeader());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"defaultParser",value:function(e,t){return Object.fromEntries(t.split("\t").map((function(t,r){return[e[r],t]})))}},{key:"getNames",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.columnNames.length){e.next=2;break}return e.abrupt("return",this.columnNames);case 2:return e.next=4,this.bed.getHeader();case 4:return t=e.sent,r=t.split("\n").filter((function(e){return!!e})),n=r[r.length-1],e.abrupt("return",n&&n.includes("\t")?n.slice(1).split("\t").map((function(e){return e.trim()})):null);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFeatures",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(h.ObservableCreate)(function(){var a=Object(s.a)(c.a.mark((function a(s){var i,u,o,d,l,f,p;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.bed.getMetadata();case 2:return i=a.sent,u=i.columnNumbers,o=u.ref-1,d=u.start-1,l=u.end-1,f=d===l?1:0,a.next=10,t.getNames();case 10:return p=a.sent,a.next=13,t.bed.getLines(e.refName,e.start,e.end,{lineCallback:function(e,r){var a=e.split("\t"),c=a[o],i=+a[d],u=+a[l]+f,b="".concat(t.id,"-").concat(r),h=p?t.defaultParser(p,e):t.parser.parseLine(e,{uniqueId:b}),m=h.blockCount,g=h.blockSizes,k=h.blockStarts,O=h.chromStarts;if(m){var y=O||k||[],C=g,S=i;h.subfeatures=[];for(var w=0;w<m;w+=1){var x=(y[w]||0)+S,N=x+(C[w]||0);h.subfeatures.push({uniqueId:"".concat(b,"-").concat(w),start:x,end:N,type:"block"})}}t.scoreColumn&&(h.score=h[t.scoreColumn]),delete h.chrom,delete h.chromStart,delete h.chromEnd;var _=new v.a(Object(n.a)(Object(n.a)({},h),{},{start:i,end:u,refName:c,uniqueId:b})),R=_.get("thickStart")?Object(j.a)(_):_;s.next(R)},signal:r.signal});case 13:s.complete();case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),r.signal)}},{key:"freeResources",value:function(){}}]),r}(p.BaseFeatureDataAdapter);k.capabilities=["getFeatures","getRefNames"]},815:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(135);function a(e){var t=e.children(),r=e.get("thickStart"),a=e.get("thickEnd");if(!r&&!a)return e;var c=t?t.filter((function(e){return"block"===e.get("type")})).sort((function(e,t){return e.get("start")-t.get("start")})):[],s=[];c.forEach((function(t){var n=t.get("start"),c=t.get("end");if(r>=c){var i=e.get("strand")>0?"five":"three";s.push({type:"".concat(i,"_prime_UTR"),start:n,end:c})}else if(r>n&&r<c&&a>=c){var u=e.get("strand")>0?"five":"three";s.push({type:"".concat(u,"_prime_UTR"),start:n,end:r},{type:"CDS",start:r,end:c})}else if(r<=n&&a>=c)s.push({type:"CDS",start:n,end:c});else if(r>n&&r<c&&a<c){var o=e.get("strand")>0?"five":"three",d=e.get("strand")>0?"three":"five";s.push({type:"".concat(o,"_prime_UTR"),start:n,end:r},{type:"CDS",start:r,end:a},{type:"".concat(d,"_prime_UTR"),start:a,end:c})}else if(r<=n&&a>n&&a<c){var l=e.get("strand")>0?"three":"five";s.push({type:"CDS",start:n,end:a},{type:"".concat(l,"_prime_UTR"),start:a,end:c})}else if(a<=n){var f=e.get("strand")>0?"three":"five";s.push({type:"".concat(f,"_prime_UTR"),start:n,end:c})}}));var i={};return e.tags().forEach((function(t){i[t]=e.get(t)})),i.subfeatures=s,i.type="mRNA",i.uniqueId=e.id(),delete i.chromStarts,delete i.chromStart,delete i.chromEnd,delete i.chrom,delete i.blockStarts,delete i.blockSizes,delete i.blockCount,delete i.thickStart,delete i.thickEnd,new n.a({data:i,id:e.id()})}}}]);
//# sourceMappingURL=40.948c6f51.chunk.js.map