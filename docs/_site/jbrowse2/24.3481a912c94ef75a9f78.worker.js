this.webpackChunk([24],{1592:function(t,e){},2110:function(t,e,r){"use strict";(function(t,i){var n=r(24),a=r(5),s=r.n(a),o=r(12),h=r(13),u=r(15),f={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(t){t=t||{},this.files=[],this.comment=t.comment,this.password}};f.Zip.CompressionMethod={STORE:0,DEFLATE:8},f.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},f.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},f.Zip.FileHeaderSignature=[80,75,1,2],f.Zip.LocalFileHeaderSignature=[80,75,3,4],f.Zip.CentralDirectorySignature=[80,75,5,6],f.Zip.prototype.addFile=function(t,e){(e=e||{}).filename;var r,i=t.length,n=0;if(t instanceof Array&&(t=new Uint8Array(t)),"number"!==typeof e.compressionMethod&&(e.compressionMethod=f.Zip.CompressionMethod.DEFLATE),e.compress)switch(e.compressionMethod){case f.Zip.CompressionMethod.STORE:break;case f.Zip.CompressionMethod.DEFLATE:n=f.CRC32.calc(t),t=this.deflateWithOption(t,e),r=!0;break;default:throw new Error("unknown compression method:"+e.compressionMethod)}this.files.push({buffer:t,option:e,compressed:r,encrypted:!1,size:i,crc32:n})},f.Zip.prototype.setPassword=function(t){this.password=t},f.Zip.prototype.compress=function(){var t,e,r,i,n,a,s,o,h,u,c,l,p,d,b,w,m,g,y,v,k,x,I,R,S,D,C=this.files,B=0,T=0;for(I=0,R=C.length;I<R;++I){if(d=(t=C[I]).option.filename?t.option.filename.length:0,b=t.option.extraField?t.option.extraField.length:0,w=t.option.comment?t.option.comment.length:0,!t.compressed)switch(t.crc32=f.CRC32.calc(t.buffer),t.option.compressionMethod){case f.Zip.CompressionMethod.STORE:break;case f.Zip.CompressionMethod.DEFLATE:t.buffer=this.deflateWithOption(t.buffer,t.option),t.compressed=!0;break;default:throw new Error("unknown compression method:"+t.option.compressionMethod)}if(void 0!==t.option.password||void 0!==this.password){for(x=this.createEncryptionKey(t.option.password||this.password),v=t.buffer,(k=new Uint8Array(v.length+12)).set(v,12),v=k,S=0;S<12;++S)v[S]=this.encode(x,11===I?255&t.crc32:256*Math.random()|0);for(D=v.length;S<D;++S)v[S]=this.encode(x,v[S]);t.buffer=v}B+=30+d+t.buffer.length,T+=46+d+w}for(a=22+(this.comment?this.comment.length:0),e=new Uint8Array(B+T+a),r=0,n=(i=B)+T,I=0,R=C.length;I<R;++I)d=(t=C[I]).option.filename?t.option.filename.length:0,b=0,w=t.option.comment?t.option.comment.length:0,s=r,e[r++]=f.Zip.LocalFileHeaderSignature[0],e[r++]=f.Zip.LocalFileHeaderSignature[1],e[r++]=f.Zip.LocalFileHeaderSignature[2],e[r++]=f.Zip.LocalFileHeaderSignature[3],e[i++]=f.Zip.FileHeaderSignature[0],e[i++]=f.Zip.FileHeaderSignature[1],e[i++]=f.Zip.FileHeaderSignature[2],e[i++]=f.Zip.FileHeaderSignature[3],20,e[i++]=20,e[i++]=t.option.os||f.Zip.OperatingSystem.MSDOS,e[r++]=e[i++]=20,e[r++]=e[i++]=0,o=0,(t.option.password||this.password)&&(o|=f.Zip.Flags.ENCRYPT),e[r++]=e[i++]=255&o,e[r++]=e[i++]=o>>8&255,h=t.option.compressionMethod,e[r++]=e[i++]=255&h,e[r++]=e[i++]=h>>8&255,u=t.option.date||new Date,e[r++]=e[i++]=(7&u.getMinutes())<<5|u.getSeconds()/2|0,e[r++]=e[i++]=u.getHours()<<3|u.getMinutes()>>3,e[r++]=e[i++]=(u.getMonth()+1&7)<<5|u.getDate(),e[r++]=e[i++]=(u.getFullYear()-1980&127)<<1|u.getMonth()+1>>3,c=t.crc32,e[r++]=e[i++]=255&c,e[r++]=e[i++]=c>>8&255,e[r++]=e[i++]=c>>16&255,e[r++]=e[i++]=c>>24&255,l=t.buffer.length,e[r++]=e[i++]=255&l,e[r++]=e[i++]=l>>8&255,e[r++]=e[i++]=l>>16&255,e[r++]=e[i++]=l>>24&255,p=t.size,e[r++]=e[i++]=255&p,e[r++]=e[i++]=p>>8&255,e[r++]=e[i++]=p>>16&255,e[r++]=e[i++]=p>>24&255,e[r++]=e[i++]=255&d,e[r++]=e[i++]=d>>8&255,e[r++]=e[i++]=255&b,e[r++]=e[i++]=b>>8&255,e[i++]=255&w,e[i++]=w>>8&255,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=255&s,e[i++]=s>>8&255,e[i++]=s>>16&255,e[i++]=s>>24&255,(m=t.option.filename)&&(e.set(m,r),e.set(m,i),r+=d,i+=d),(g=t.option.extraField)&&(e.set(g,r),e.set(g,i),r+=b,i+=b),(y=t.option.comment)&&(e.set(y,i),i+=w),e.set(t.buffer,r),r+=t.buffer.length;return e[n++]=f.Zip.CentralDirectorySignature[0],e[n++]=f.Zip.CentralDirectorySignature[1],e[n++]=f.Zip.CentralDirectorySignature[2],e[n++]=f.Zip.CentralDirectorySignature[3],e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=255&R,e[n++]=R>>8&255,e[n++]=255&R,e[n++]=R>>8&255,e[n++]=255&T,e[n++]=T>>8&255,e[n++]=T>>16&255,e[n++]=T>>24&255,e[n++]=255&B,e[n++]=B>>8&255,e[n++]=B>>16&255,e[n++]=B>>24&255,w=this.comment?this.comment.length:0,e[n++]=255&w,e[n++]=w>>8&255,this.comment&&(e.set(this.comment,n),n+=w),e},f.Zip.prototype.deflateWithOption=function(t,e){return new f.RawDeflate(t,e.deflateOption).compress()},f.Zip.prototype.getByte=function(t){var e=65535&t[2]|2;return e*(1^e)>>8&255},f.Zip.prototype.encode=function(t,e){var r=this.getByte(t);return this.updateKeys(t,e),r^e},f.Zip.prototype.updateKeys=function(t,e){t[0]=f.CRC32.single(t[0],e),t[1]=1+(6681*(20173*(t[1]+(255&t[0]))>>>0)>>>0)>>>0,t[2]=f.CRC32.single(t[2],t[1]>>>24)},f.Zip.prototype.createEncryptionKey=function(t){var e,r,i=[305419896,591751049,878082192];for(i=new Uint32Array(i),e=0,r=t.length;e<r;++e)this.updateKeys(i,255&t[e]);return i},f.Huffman.buildHuffmanTable=function(t){var e,r,i,n,a,s,o,h,u,f,c,l=t.length,p=0,d=Number.POSITIVE_INFINITY;for(h=0,u=l;h<u;++h)t[h]>p&&(p=t[h]),t[h]<d&&(d=t[h]);for(e=1<<p,r=new Uint32Array(e),i=1,n=0,a=2;i<=p;){for(h=0;h<l;++h)if(t[h]===i){for(s=0,o=n,f=0;f<i;++f)s=s<<1|1&o,o>>=1;for(c=i<<16|h,f=s;f<e;f+=a)r[f]=c;++n}++i,n<<=1,a<<=1}return[r,p,d]};var c=f.Huffman.buildHuffmanTable;f.RawInflate=function(t,e){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output,this.op,this.bfinal=!1,this.bufferType=f.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!e&&(e={})||(e.index&&(this.ip=e.index),e.bufferSize&&(this.bufferSize=e.bufferSize),e.bufferType&&(this.bufferType=e.bufferType),e.resize&&(this.resize=e.resize)),this.bufferType){case f.RawInflate.BufferType.BLOCK:this.op=f.RawInflate.MaxBackwardLength,this.output=new Uint8Array(f.RawInflate.MaxBackwardLength+this.bufferSize+f.RawInflate.MaxCopyLength);break;case f.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},f.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},f.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case f.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case f.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},f.RawInflate.MaxBackwardLength=32768,f.RawInflate.MaxCopyLength=258,f.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),f.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),f.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),f.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),f.RawInflate.FixedLiteralLengthTable=function(){var t,e,r=new Uint8Array(288);for(t=0,e=r.length;t<e;++t)r[t]=t<=143?8:t<=255?9:t<=279?7:8;return c(r)}(),f.RawInflate.FixedDistanceTable=function(){var t,e,r=new Uint8Array(30);for(t=0,e=r.length;t<e;++t)r[t]=5;return c(r)}(),f.RawInflate.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+t)}},f.RawInflate.prototype.readBits=function(t){var e,r=this.bitsbuf,i=this.bitsbuflen,n=this.input,a=this.ip;if(a+(t-i+7>>3)>=n.length)throw new Error("input buffer is broken");for(;i<t;)r|=n[a++]<<i,i+=8;return e=r&(1<<t)-1,r>>>=t,i-=t,this.bitsbuf=r,this.bitsbuflen=i,this.ip=a,e},f.RawInflate.prototype.readCodeByTable=function(t){for(var e,r,i=this.bitsbuf,n=this.bitsbuflen,a=this.input,s=this.ip,o=a.length,h=t[0],u=t[1];n<u&&!(s>=o);)i|=a[s++]<<n,n+=8;if((r=(e=h[i&(1<<u)-1])>>>16)>n)throw new Error("invalid code length: "+r);return this.bitsbuf=i>>r,this.bitsbuflen=n-r,this.ip=s,65535&e},f.RawInflate.prototype.parseUncompressedBlock=function(){var t,e,r=this.input,i=this.ip,n=this.output,a=this.op,s=r.length,o=n.length;if(this.bitsbuf=0,this.bitsbuflen=0,i+1>=s)throw new Error("invalid uncompressed block header: LEN");if(t=r[i++]|r[i++]<<8,i+1>=s)throw new Error("invalid uncompressed block header: NLEN");if(t===~(r[i++]|r[i++]<<8))throw new Error("invalid uncompressed block header: length verify");if(i+t>r.length)throw new Error("input buffer is broken");switch(this.bufferType){case f.RawInflate.BufferType.BLOCK:for(;a+t>n.length;)t-=e=o-a,n.set(r.subarray(i,i+e),a),a+=e,i+=e,this.op=a,n=this.expandBufferBlock(),a=this.op;break;case f.RawInflate.BufferType.ADAPTIVE:for(;a+t>n.length;)n=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}n.set(r.subarray(i,i+t),a),a+=t,i+=t,this.ip=i,this.op=a,this.output=n},f.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case f.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(f.RawInflate.FixedLiteralLengthTable,f.RawInflate.FixedDistanceTable);break;case f.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(f.RawInflate.FixedLiteralLengthTable,f.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},f.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var t,e,r,i,n,a,s,o,h,u=this.readBits(5)+257,l=this.readBits(5)+1,p=this.readBits(4)+4,d=new Uint8Array(f.RawInflate.Order.length);for(o=0;o<p;++o)d[f.RawInflate.Order[o]]=this.readBits(3);for(t=c(d),i=new Uint8Array(u+l),o=0,h=u+l;o<h;)switch(n=this.readCodeByTable(t)){case 16:for(s=3+this.readBits(2);s--;)i[o++]=a;break;case 17:for(s=3+this.readBits(3);s--;)i[o++]=0;a=0;break;case 18:for(s=11+this.readBits(7);s--;)i[o++]=0;a=0;break;default:i[o++]=n,a=n}switch(e=c(i.subarray(0,u)),r=c(i.subarray(u)),this.bufferType){case f.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(e,r);break;case f.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(e,r);break;default:throw new Error("invalid inflate mode")}},f.RawInflate.prototype.decodeHuffmanBlock=function(t,e){var r=this.output,i=this.op;this.currentLitlenTable=t;for(var n,a,s,o,h=r.length-f.RawInflate.MaxCopyLength,u=f.RawInflate.LengthCodeTable,c=f.RawInflate.LengthExtraTable,l=f.RawInflate.DistCodeTable,p=f.RawInflate.DistExtraTable;256!==(n=this.readCodeByTable(t));)if(n<256)i>=h&&(this.op=i,r=this.expandBufferBlock(),i=this.op),r[i++]=n;else for(o=u[a=n-257],c[a]>0&&(o+=this.readBits(c[a])),s=l[n=this.readCodeByTable(e)],p[n]>0&&(s+=this.readBits(p[n])),i>=h&&(this.op=i,r=this.expandBufferBlock(),i=this.op);o--;)r[i]=r[i++-s];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=i},f.RawInflate.prototype.decodeHuffmanAdaptive=function(t,e){var r=this.output,i=this.op;this.currentLitlenTable=t;for(var n,a,s,o,h=r.length,u=f.RawInflate.LengthCodeTable,c=f.RawInflate.LengthExtraTable,l=f.RawInflate.DistCodeTable,p=f.RawInflate.DistExtraTable;256!==(n=this.readCodeByTable(t));)if(n<256)i>=h&&(h=(r=this.expandBufferAdaptive()).length),r[i++]=n;else for(o=u[a=n-257],c[a]>0&&(o+=this.readBits(c[a])),s=l[n=this.readCodeByTable(e)],p[n]>0&&(s+=this.readBits(p[n])),i+o>h&&(h=(r=this.expandBufferAdaptive()).length);o--;)r[i]=r[i++-s];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=i},f.RawInflate.prototype.expandBufferBlock=function(t){var e=new Uint8Array(this.op-f.RawInflate.MaxBackwardLength),r=this.op-f.RawInflate.MaxBackwardLength,i=this.output;return e.set(i.subarray(f.RawInflate.MaxBackwardLength,e.length)),this.blocks.push(e),this.totalpos+=e.length,i.set(i.subarray(r,r+f.RawInflate.MaxBackwardLength)),this.op=f.RawInflate.MaxBackwardLength,i},f.RawInflate.prototype.expandBufferAdaptive=function(t){var e,r,i,n=this.input.length/this.ip+1|0,a=this.input,s=this.output;return t&&("number"===typeof t.fixRatio&&(n=t.fixRatio),"number"===typeof t.addRatio&&(n+=t.addRatio)),r=n<2?(i=(a.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<s.length?s.length+i:s.length<<1:s.length*n,(e=new Uint8Array(r)).set(s),this.output=e,this.output},f.RawInflate.prototype.concatBufferBlock=function(){var t,e,r,i,n,a=0,s=this.totalpos+(this.op-f.RawInflate.MaxBackwardLength),o=this.output,h=this.blocks,u=new Uint8Array(s);if(0===h.length)return this.output.subarray(f.RawInflate.MaxBackwardLength,this.op);for(e=0,r=h.length;e<r;++e)for(i=0,n=(t=h[e]).length;i<n;++i)u[a++]=t[i];for(e=f.RawInflate.MaxBackwardLength,r=this.op;e<r;++e)u[a++]=o[e];return this.blocks=[],this.buffer=u,this.buffer},f.RawInflate.prototype.concatBufferDynamic=function(){var t,e=this.op;return this.resize?(t=new Uint8Array(e)).set(this.output.subarray(0,e)):t=this.output.subarray(0,e),this.buffer=t,this.buffer};c=f.Huffman.buildHuffmanTable;f.RawInflateStream=function(t,e,r){this.blocks=[],this.bufferSize=r||ZLIB_STREAM_RAW_INFLATE_BUFFER_SIZE,this.totalpos=0,this.ip=void 0===e?0:e,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=f.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},f.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},f.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},f.RawInflateStream.prototype.decompress=function(t,e){var r=!1;for(void 0!==t&&(this.input=t),void 0!==e&&(this.ip=e);!r;)switch(this.status){case f.RawInflateStream.Status.INITIALIZED:case f.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(r=!0);break;case f.RawInflateStream.Status.BLOCK_HEADER_END:case f.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case f.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(r=!0);break;case f.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(r=!0);break;case f.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(r=!0)}break;case f.RawInflateStream.Status.BLOCK_BODY_END:case f.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case f.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(r=!0);break;case f.RawInflateStream.BlockType.FIXED:case f.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(r=!0)}break;case f.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?r=!0:this.status=f.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},f.RawInflateStream.MaxBackwardLength=32768,f.RawInflateStream.MaxCopyLength=258,f.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),f.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),f.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),f.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),f.RawInflateStream.FixedLiteralLengthTable=function(){var t,e,r=new Uint8Array(288);for(t=0,e=r.length;t<e;++t)r[t]=t<=143?8:t<=255?9:t<=279?7:8;return c(r)}(),f.RawInflateStream.FixedDistanceTable=function(){var t,e,r=new Uint8Array(30);for(t=0,e=r.length;t<e;++t)r[t]=5;return c(r)}(),f.RawInflateStream.prototype.readBlockHeader=function(){var t;if(this.status=f.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(t=this.readBits(3))<0)return this.restore_(),-1;switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.currentBlockType=f.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=f.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=f.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+t)}this.status=f.RawInflateStream.Status.BLOCK_HEADER_END},f.RawInflateStream.prototype.readBits=function(t){for(var e,r=this.bitsbuf,i=this.bitsbuflen,n=this.input,a=this.ip;i<t;){if(n.length<=a)return-1;r|=(e=n[a++])<<i,i+=8}return e=r&(1<<t)-1,r>>>=t,i-=t,this.bitsbuf=r,this.bitsbuflen=i,this.ip=a,e},f.RawInflateStream.prototype.readCodeByTable=function(t){for(var e,r,i=this.bitsbuf,n=this.bitsbuflen,a=this.input,s=this.ip,o=t[0],h=t[1];n<h;){if(a.length<=s)return-1;i|=a[s++]<<n,n+=8}if((r=(e=o[i&(1<<h)-1])>>>16)>n)throw new Error("invalid code length: "+r);return this.bitsbuf=i>>r,this.bitsbuflen=n-r,this.ip=s,65535&e},f.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var t,e=this.input,r=this.ip;if(this.status=f.RawInflateStream.Status.BLOCK_BODY_START,r+4>=e.length)return-1;if((t=e[r++]|e[r++]<<8)===~(e[r++]|e[r++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=r,this.blockLength=t,this.status=f.RawInflateStream.Status.BLOCK_BODY_END},f.RawInflateStream.prototype.parseUncompressedBlock=function(){var t=this.input,e=this.ip,r=this.output,i=this.op,n=this.blockLength;for(this.status=f.RawInflateStream.Status.DECODE_BLOCK_START;n--;){if(i===r.length&&(r=this.expandBuffer({fixRatio:2})),e>=t.length)return this.ip=e,this.op=i,this.blockLength=n+1,-1;r[i++]=t[e++]}return n<0&&(this.status=f.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=e,this.op=i,0},f.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=f.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=f.RawInflateStream.FixedLiteralLengthTable,this.distTable=f.RawInflateStream.FixedDistanceTable,this.status=f.RawInflateStream.Status.BLOCK_BODY_END,0},f.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},f.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},f.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var t,e,r,i,n=new Uint8Array(f.RawInflateStream.Order.length);if(this.status=f.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),t=this.readBits(5)+257,e=this.readBits(5)+1,r=this.readBits(4)+4,t<0||e<0||r<0)return this.restore_(),-1;try{(function(){var a,s,o,h,u,l,p=0;for(u=0;u<r;++u){if((a=this.readBits(3))<0)throw new Error("not enough input");n[f.RawInflateStream.Order[u]]=a}for(i=c(n),h=new Uint8Array(t+e),u=0,l=t+e;u<l;){if((s=this.readCodeByTable(i))<0)throw new Error("not enough input");switch(s){case 16:if((a=this.readBits(2))<0)throw new Error("not enough input");for(o=3+a;o--;)h[u++]=p;break;case 17:if((a=this.readBits(3))<0)throw new Error("not enough input");for(o=3+a;o--;)h[u++]=0;p=0;break;case 18:if((a=this.readBits(7))<0)throw new Error("not enough input");for(o=11+a;o--;)h[u++]=0;p=0;break;default:h[u++]=s,p=s}}this.litlenTable=c(h.subarray(0,t)),this.distTable=c(h.subarray(t))}).call(this)}catch(a){return this.restore_(),-1}return this.status=f.RawInflateStream.Status.BLOCK_BODY_END,0},f.RawInflateStream.prototype.decodeHuffman=function(){var t,e,r,i,n,a=this.output,s=this.op,o=this.litlenTable,h=this.distTable,u=a.length;for(this.status=f.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(t=this.readCodeByTable(o))<0)return this.op=s,this.restore_(),-1;if(256===t)break;if(t<256)s===u&&(u=(a=this.expandBuffer()).length),a[s++]=t;else{if(e=t-257,i=f.RawInflateStream.LengthCodeTable[e],f.RawInflateStream.LengthExtraTable[e]>0){if((n=this.readBits(f.RawInflateStream.LengthExtraTable[e]))<0)return this.op=s,this.restore_(),-1;i+=n}if((t=this.readCodeByTable(h))<0)return this.op=s,this.restore_(),-1;if(r=f.RawInflateStream.DistCodeTable[t],f.RawInflateStream.DistExtraTable[t]>0){if((n=this.readBits(f.RawInflateStream.DistExtraTable[t]))<0)return this.op=s,this.restore_(),-1;r+=n}for(s+i>=u&&(u=(a=this.expandBuffer()).length);i--;)a[s]=a[s++-r];if(this.ip===this.input.length)return this.op=s,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=s,this.status=f.RawInflateStream.Status.DECODE_BLOCK_END},f.RawInflateStream.prototype.expandBuffer=function(t){var e,r,i,n=this.input.length/this.ip+1|0,a=this.input,s=this.output;return t&&("number"===typeof t.fixRatio&&(n=t.fixRatio),"number"===typeof t.addRatio&&(n+=t.addRatio)),r=n<2?(i=(a.length-this.ip)/this.litlenTable[2]/2*258|0)<s.length?s.length+i:s.length<<1:s.length*n,(e=new Uint8Array(r)).set(s),this.output=e,this.output},f.RawInflateStream.prototype.concatBuffer=function(){var t,e,r=this.op;return t=this.resize?new Uint8Array(this.output.subarray(this.sp,r)):this.output.subarray(this.sp,r),this.sp=r,r>f.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=f.RawInflateStream.MaxBackwardLength,e=this.output,this.output=new Uint8Array(this.bufferSize+f.RawInflateStream.MaxBackwardLength),this.output.set(e.subarray(r-f.RawInflateStream.MaxBackwardLength,r))),t},f.Inflate=function(t,e){var r,i;switch(this.input=t,this.ip=0,this.rawinflate,this.verify,!e&&(e={})||(e.index&&(this.ip=e.index),e.verify&&(this.verify=e.verify)),r=t[this.ip++],i=t[this.ip++],15&r){case f.CompressionMethod.DEFLATE:this.method=f.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((r<<8)+i)%31!==0)throw new Error("invalid fcheck flag:"+((r<<8)+i)%31);if(32&i)throw new Error("fdict flag is not supported");this.rawinflate=new f.RawInflate(t,{index:this.ip,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})},f.Inflate.BufferType=f.RawInflate.BufferType,f.Inflate.prototype.decompress=function(){var t,e=this.input;if(t=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(e[this.ip++]<<24|e[this.ip++]<<16|e[this.ip++]<<8|e[this.ip++])>>>0!==f.Adler32(t))throw new Error("invalid adler-32 checksum");return t},f.InflateStream=function(t){this.input=void 0===t?new Uint8Array:t,this.ip=0,this.rawinflate=new f.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},f.InflateStream.prototype.decompress=function(t){var e;if(void 0!==t){var r=new Uint8Array(this.input.length+t.length);r.set(this.input,0),r.set(t,this.input.length),this.input=r}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(e=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),e)},f.InflateStream.prototype.readHeader=function(){var t=this.ip,e=this.input,r=e[t++],i=e[t++];if(void 0===r||void 0===i)return-1;switch(15&r){case f.CompressionMethod.DEFLATE:this.method=f.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((r<<8)+i)%31!==0)throw new Error("invalid fcheck flag:"+((r<<8)+i)%31);if(32&i)throw new Error("fdict flag is not supported");this.ip=t},f.Gunzip=function(t,e){this.input=t,this.ip=0,this.member=[],this.decompressed=!1},f.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},f.Gunzip.prototype.decompress=function(){for(var t=this.input.length;this.ip<t;)this.decodeMember();return this.decompressed=!0,this.concatMember()},f.Gunzip.prototype.decodeMember=function(){var t,e,r,i,n,a,s,o,h,u=new f.GunzipMember,c=this.input,l=this.ip;if(u.id1=c[l++],u.id2=c[l++],31!==u.id1||139!==u.id2)throw new Error("invalid file signature:"+u.id1+","+u.id2);switch(u.cm=c[l++],u.cm){case 8:break;default:throw new Error("unknown compression method: "+u.cm)}if(u.flg=c[l++],o=c[l++]|c[l++]<<8|c[l++]<<16|c[l++]<<24,u.mtime=new Date(1e3*o),u.xfl=c[l++],u.os=c[l++],(u.flg&f.Gzip.FlagsMask.FEXTRA)>0&&(u.xlen=c[l++]|c[l++]<<8,l=this.decodeSubField(l,u.xlen)),(u.flg&f.Gzip.FlagsMask.FNAME)>0){for(s=[],a=0;(n=c[l++])>0;)s[a++]=String.fromCharCode(n);u.name=s.join("")}if((u.flg&f.Gzip.FlagsMask.FCOMMENT)>0){for(s=[],a=0;(n=c[l++])>0;)s[a++]=String.fromCharCode(n);u.comment=s.join("")}if((u.flg&f.Gzip.FlagsMask.FHCRC)>0&&(u.crc16=65535&f.CRC32.calc(c,0,l),u.crc16!==(c[l++]|c[l++]<<8)))throw new Error("invalid header crc16");if(t=c[c.length-4]|c[c.length-3]<<8|c[c.length-2]<<16|c[c.length-1]<<24,c.length-l-4-4<512*t&&(i=t),e=new f.RawInflate(c,{index:l,bufferSize:i}),u.data=r=e.decompress(),l=e.ip,u.crc32=h=(c[l++]|c[l++]<<8|c[l++]<<16|c[l++]<<24)>>>0,f.CRC32.calc(r)!==h)throw new Error("invalid CRC-32 checksum: 0x"+f.CRC32.calc(r).toString(16)+" / 0x"+h.toString(16));if(u.isize=t=(c[l++]|c[l++]<<8|c[l++]<<16|c[l++]<<24)>>>0,(4294967295&r.length)!==t)throw new Error("invalid input size: "+(4294967295&r.length)+" / "+t);this.member.push(u),this.ip=l},f.Gunzip.prototype.decodeSubField=function(t,e){return t+e},f.Gunzip.prototype.concatMember=function(){var t,e,r,i=this.member,n=0,a=0;for(t=0,e=i.length;t<e;++t)a+=i[t].data.length;for(r=new Uint8Array(a),t=0;t<e;++t)r.set(i[t].data,n),n+=i[t].data.length;return r},f.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},f.GunzipMember.prototype.getName=function(){return this.name},f.GunzipMember.prototype.getData=function(){return this.data},f.GunzipMember.prototype.getMtime=function(){return this.mtime},f.Gzip=function(t,e){this.input=t,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,e&&(e.flags&&(this.flags=e.flags),"string"===typeof e.filename&&(this.filename=e.filename),"string"===typeof e.comment&&(this.comment=e.comment),e.deflateOptions&&(this.deflateOptions=e.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},f.Gzip.DefaultBufferSize=32768,f.Gzip.prototype.compress=function(){var t,e,r,i,n,a,s,o,h=new Uint8Array(f.Gzip.DefaultBufferSize),u=0,c=this.input,l=this.ip,p=this.filename,d=this.comment;if(h[u++]=31,h[u++]=139,h[u++]=8,t=0,this.flags.fname&&(t|=f.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(t|=f.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(t|=f.Gzip.FlagsMask.FHCRC),h[u++]=t,e=(Date.now?Date.now():+new Date)/1e3|0,h[u++]=255&e,h[u++]=e>>>8&255,h[u++]=e>>>16&255,h[u++]=e>>>24&255,h[u++]=0,h[u++]=f.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(s=0,o=p.length;s<o;++s)(a=p.charCodeAt(s))>255&&(h[u++]=a>>>8&255),h[u++]=255&a;h[u++]=0}if(this.flags.comment){for(s=0,o=d.length;s<o;++s)(a=d.charCodeAt(s))>255&&(h[u++]=a>>>8&255),h[u++]=255&a;h[u++]=0}return this.flags.fhcrc&&(r=65535&f.CRC32.calc(h,0,u),h[u++]=255&r,h[u++]=r>>>8&255),this.deflateOptions.outputBuffer=h,this.deflateOptions.outputIndex=u,h=(n=new f.RawDeflate(c,this.deflateOptions)).compress(),(u=n.op)+8>h.buffer.byteLength?(this.output=new Uint8Array(u+8),this.output.set(new Uint8Array(h.buffer)),h=this.output):h=new Uint8Array(h.buffer),i=f.CRC32.calc(c),h[u++]=255&i,h[u++]=i>>>8&255,h[u++]=i>>>16&255,h[u++]=i>>>24&255,o=c.length,h[u++]=255&o,h[u++]=o>>>8&255,h[u++]=o>>>16&255,h[u++]=o>>>24&255,this.ip=l,u<h.length&&(this.output=h=h.subarray(0,u)),h},f.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},f.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},f.Heap=function(t){this.buffer=new Uint16Array(2*t),this.length=0},f.Heap.prototype.getParent=function(t){return 2*((t-2)/4|0)},f.Heap.prototype.getChild=function(t){return 2*t+2},f.Heap.prototype.push=function(t,e){var r,i,n,a=this.buffer;for(r=this.length,a[this.length++]=e,a[this.length++]=t;r>0&&(i=this.getParent(r),a[r]>a[i]);)n=a[r],a[r]=a[i],a[i]=n,n=a[r+1],a[r+1]=a[i+1],a[i+1]=n,r=i;return this.length},f.Heap.prototype.pop=function(){var t,e,r,i,n,a=this.buffer;for(e=a[0],t=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],n=0;!((i=this.getChild(n))>=this.length)&&(i+2<this.length&&a[i+2]>a[i]&&(i+=2),a[i]>a[n]);)r=a[n],a[n]=a[i],a[i]=r,r=a[n+1],a[n+1]=a[i+1],a[i+1]=r,n=i;return{index:t,value:e,length:this.length}},f.RawDeflate=function(t,e){this.compressionType=f.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=t instanceof Array?new Uint8Array(t):t,this.output,this.op=0,e&&(e.lazy&&(this.lazy=e.lazy),"number"===typeof e.compressionType&&(this.compressionType=e.compressionType),e.outputBuffer&&(this.output=e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"===typeof e.outputIndex&&(this.op=e.outputIndex)),this.output||(this.output=new Uint8Array(32768))},f.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},f.RawDeflate.Lz77MinLength=3,f.RawDeflate.Lz77MaxLength=258,f.RawDeflate.WindowSize=32768,f.RawDeflate.MaxCodeLength=16,f.RawDeflate.HUFMAX=286,f.RawDeflate.FixedHuffmanTable=function(){var t,e=[];for(t=0;t<288;t++)switch(!0){case t<=143:e.push([t+48,8]);break;case t<=255:e.push([t-144+400,9]);break;case t<=279:e.push([t-256+0,7]);break;case t<=287:e.push([t-280+192,8]);break;default:throw"invalid literal: "+t}return e}(),f.RawDeflate.prototype.compress=function(){var t,e,r,i=this.input;switch(this.compressionType){case f.RawDeflate.CompressionType.NONE:for(e=0,r=i.length;e<r;)e+=(t=i.subarray(e,e+65535)).length,this.makeNocompressBlock(t,e===r);break;case f.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(i,!0),this.op=this.output.length;break;case f.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(i,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},f.RawDeflate.prototype.makeNocompressBlock=function(t,e){var r,i,n,a,s=this.output,o=this.op;for(s=new Uint8Array(this.output.buffer);s.length<=o+t.length+5;)s=new Uint8Array(s.length<<1);return s.set(this.output),r=e?1:0,i=f.RawDeflate.CompressionType.NONE,s[o++]=r|i<<1,a=65536+~(n=t.length)&65535,s[o++]=255&n,s[o++]=n>>>8&255,s[o++]=255&a,s[o++]=a>>>8&255,s.set(t,o),o+=t.length,s=s.subarray(0,o),this.op=o,this.output=s,s},f.RawDeflate.prototype.makeFixedHuffmanBlock=function(t,e){var r,i,n,a=new f.BitStream(new Uint8Array(this.output.buffer),this.op);return r=e?1:0,i=f.RawDeflate.CompressionType.FIXED,a.writeBits(r,1,!0),a.writeBits(i,2,!0),n=this.lz77(t),this.fixedHuffman(n,a),a.finish()},f.RawDeflate.prototype.makeDynamicHuffmanBlock=function(t,e){var r,i,n,a,s,o,h,u,c,l,p,d,b,w,m,g,y,v=new f.BitStream(new Uint8Array(this.output.buffer),this.op),k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(19);for(r=e?1:0,i=f.RawDeflate.CompressionType.DYNAMIC,v.writeBits(r,1,!0),v.writeBits(i,2,!0),n=this.lz77(t),h=this.getLengths_(this.freqsLitLen,15),u=this.getCodesFromLengths_(h),c=this.getLengths_(this.freqsDist,7),l=this.getCodesFromLengths_(c),a=286;a>257&&0===h[a-1];a--);for(s=30;s>1&&0===c[s-1];s--);for(p=this.getTreeSymbols_(a,h,s,c),d=this.getLengths_(p.freqs,7),g=0;g<19;g++)x[g]=d[k[g]];for(o=19;o>4&&0===x[o-1];o--);for(b=this.getCodesFromLengths_(d),v.writeBits(a-257,5,!0),v.writeBits(s-1,5,!0),v.writeBits(o-4,4,!0),g=0;g<o;g++)v.writeBits(x[g],3,!0);for(g=0,y=p.codes.length;g<y;g++)if(w=p.codes[g],v.writeBits(b[w],d[w],!0),w>=16){switch(g++,w){case 16:m=2;break;case 17:m=3;break;case 18:m=7;break;default:throw"invalid code: "+w}v.writeBits(p.codes[g],m,!0)}return this.dynamicHuffman(n,[u,h],[l,c],v),v.finish()},f.RawDeflate.prototype.dynamicHuffman=function(t,e,r,i){var n,a,s,o,h,u,f,c;for(h=e[0],u=e[1],f=r[0],c=r[1],n=0,a=t.length;n<a;++n)if(s=t[n],i.writeBits(h[s],u[s],!0),s>256)i.writeBits(t[++n],t[++n],!0),o=t[++n],i.writeBits(f[o],c[o],!0),i.writeBits(t[++n],t[++n],!0);else if(256===s)break;return i},f.RawDeflate.prototype.fixedHuffman=function(t,e){var r,i,n;for(r=0,i=t.length;r<i;r++)if(n=t[r],f.BitStream.prototype.writeBits.apply(e,f.RawDeflate.FixedHuffmanTable[n]),n>256)e.writeBits(t[++r],t[++r],!0),e.writeBits(t[++r],5),e.writeBits(t[++r],t[++r],!0);else if(256===n)break;return e},f.RawDeflate.Lz77Match=function(t,e){this.length=t,this.backwardDistance=e},f.RawDeflate.Lz77Match.LengthCodeTable=function(t){return new Uint32Array(t)}(function(){var t,e,r=[];for(t=3;t<=258;t++)e=i(t),r[t]=e[2]<<24|e[1]<<16|e[0];function i(t){switch(!0){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case t<=12:return[265,t-11,1];case t<=14:return[266,t-13,1];case t<=16:return[267,t-15,1];case t<=18:return[268,t-17,1];case t<=22:return[269,t-19,2];case t<=26:return[270,t-23,2];case t<=30:return[271,t-27,2];case t<=34:return[272,t-31,2];case t<=42:return[273,t-35,3];case t<=50:return[274,t-43,3];case t<=58:return[275,t-51,3];case t<=66:return[276,t-59,3];case t<=82:return[277,t-67,4];case t<=98:return[278,t-83,4];case t<=114:return[279,t-99,4];case t<=130:return[280,t-115,4];case t<=162:return[281,t-131,5];case t<=194:return[282,t-163,5];case t<=226:return[283,t-195,5];case t<=257:return[284,t-227,5];case 258===t:return[285,t-258,0];default:throw"invalid length: "+t}}return r}()),f.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(t){var e;switch(!0){case 1===t:e=[0,t-1,0];break;case 2===t:e=[1,t-2,0];break;case 3===t:e=[2,t-3,0];break;case 4===t:e=[3,t-4,0];break;case t<=6:e=[4,t-5,1];break;case t<=8:e=[5,t-7,1];break;case t<=12:e=[6,t-9,2];break;case t<=16:e=[7,t-13,2];break;case t<=24:e=[8,t-17,3];break;case t<=32:e=[9,t-25,3];break;case t<=48:e=[10,t-33,4];break;case t<=64:e=[11,t-49,4];break;case t<=96:e=[12,t-65,5];break;case t<=128:e=[13,t-97,5];break;case t<=192:e=[14,t-129,6];break;case t<=256:e=[15,t-193,6];break;case t<=384:e=[16,t-257,7];break;case t<=512:e=[17,t-385,7];break;case t<=768:e=[18,t-513,8];break;case t<=1024:e=[19,t-769,8];break;case t<=1536:e=[20,t-1025,9];break;case t<=2048:e=[21,t-1537,9];break;case t<=3072:e=[22,t-2049,10];break;case t<=4096:e=[23,t-3073,10];break;case t<=6144:e=[24,t-4097,11];break;case t<=8192:e=[25,t-6145,11];break;case t<=12288:e=[26,t-8193,12];break;case t<=16384:e=[27,t-12289,12];break;case t<=24576:e=[28,t-16385,13];break;case t<=32768:e=[29,t-24577,13];break;default:throw"invalid distance"}return e},f.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var t,e=this.length,r=this.backwardDistance,i=[],n=0;return t=f.RawDeflate.Lz77Match.LengthCodeTable[e],i[n++]=65535&t,i[n++]=t>>16&255,i[n++]=t>>24,t=this.getDistanceCode_(r),i[n++]=t[0],i[n++]=t[1],i[n++]=t[2],i},f.RawDeflate.prototype.lz77=function(t){var e,r,i,n,a,s,o,h,u,c={},l=f.RawDeflate.WindowSize,p=new Uint16Array(2*t.length),d=0,b=0,w=new Uint32Array(286),m=new Uint32Array(30),g=this.lazy;function y(t,e){var r,i,n=t.toLz77Array();for(r=0,i=n.length;r<i;++r)p[d++]=n[r];w[n[0]]++,m[n[3]]++,b=t.length+e-1,h=null}for(w[256]=1,e=0,r=t.length;e<r;++e){for(a=0,i=0,n=f.RawDeflate.Lz77MinLength;i<n&&e+i!==r;++i)a=a<<8|t[e+i];if(void 0===c[a]&&(c[a]=[]),s=c[a],b-- >0)s.push(e);else{for(;s.length>0&&e-s[0]>l;)s.shift();if(e+f.RawDeflate.Lz77MinLength>=r){for(h&&y(h,-1),i=0,n=r-e;i<n;++i)u=t[e+i],p[d++]=u,++w[u];break}s.length>0?(o=this.searchLongestMatch_(t,e,s),h?h.length<o.length?(u=t[e-1],p[d++]=u,++w[u],y(o,0)):y(h,-1):o.length<g?h=o:y(o,0)):h?y(h,-1):(u=t[e],p[d++]=u,++w[u]),s.push(e)}}return p[d++]=256,w[256]++,this.freqsLitLen=w,this.freqsDist=m,p.subarray(0,d)},f.RawDeflate.prototype.searchLongestMatch_=function(t,e,r){var i,n,a,s,o,h,u=0,c=t.length;t:for(s=0,h=r.length;s<h;s++){if(i=r[h-s-1],a=f.RawDeflate.Lz77MinLength,u>f.RawDeflate.Lz77MinLength){for(o=u;o>f.RawDeflate.Lz77MinLength;o--)if(t[i+o-1]!==t[e+o-1])continue t;a=u}for(;a<f.RawDeflate.Lz77MaxLength&&e+a<c&&t[i+a]===t[e+a];)++a;if(a>u&&(n=i,u=a),a===f.RawDeflate.Lz77MaxLength)break}return new f.RawDeflate.Lz77Match(u,e-n)},f.RawDeflate.prototype.getTreeSymbols_=function(t,e,r,i){var n,a,s,o,h,u,f=new Uint32Array(t+r),c=new Uint32Array(316),l=new Uint8Array(19);for(a=0,n=0;n<t;n++)f[a++]=e[n];for(n=0;n<r;n++)f[a++]=i[n];for(h=0,n=0,o=f.length;n<o;n+=a){for(a=1;n+a<o&&f[n+a]===f[n];++a);if(s=a,0===f[n])if(s<3)for(;s-- >0;)c[h++]=0,l[0]++;else for(;s>0;)(u=s<138?s:138)>s-3&&u<s&&(u=s-3),u<=10?(c[h++]=17,c[h++]=u-3,l[17]++):(c[h++]=18,c[h++]=u-11,l[18]++),s-=u;else if(c[h++]=f[n],l[f[n]]++,--s<3)for(;s-- >0;)c[h++]=f[n],l[f[n]]++;else for(;s>0;)(u=s<6?s:6)>s-3&&u<s&&(u=s-3),c[h++]=16,c[h++]=u-3,l[16]++,s-=u}return{codes:c.subarray(0,h),freqs:l}},f.RawDeflate.prototype.getLengths_=function(t,e){var r,i,n,a,s,o=t.length,h=new f.Heap(2*f.RawDeflate.HUFMAX),u=new Uint8Array(o);for(a=0;a<o;++a)t[a]>0&&h.push(a,t[a]);if(r=new Array(h.length/2),i=new Uint32Array(h.length/2),1===r.length)return u[h.pop().index]=1,u;for(a=0,s=h.length/2;a<s;++a)r[a]=h.pop(),i[a]=r[a].value;for(n=this.reversePackageMerge_(i,i.length,e),a=0,s=r.length;a<s;++a)u[r[a].index]=n[a];return u},f.RawDeflate.prototype.reversePackageMerge_=function(t,e,r){var i,n,a,s,o,h=new Uint16Array(r),u=new Uint8Array(r),f=new Uint8Array(e),c=new Array(r),l=new Array(r),p=new Array(r),d=(1<<r)-e,b=1<<r-1;function w(t){var r=l[t][p[t]];r===e?(w(t+1),w(t+1)):--f[r],++p[t]}for(h[r-1]=e,n=0;n<r;++n)d<b?u[n]=0:(u[n]=1,d-=b),d<<=1,h[r-2-n]=(h[r-1-n]/2|0)+e;for(h[0]=u[0],c[0]=new Array(h[0]),l[0]=new Array(h[0]),n=1;n<r;++n)h[n]>2*h[n-1]+u[n]&&(h[n]=2*h[n-1]+u[n]),c[n]=new Array(h[n]),l[n]=new Array(h[n]);for(i=0;i<e;++i)f[i]=r;for(a=0;a<h[r-1];++a)c[r-1][a]=t[a],l[r-1][a]=a;for(i=0;i<r;++i)p[i]=0;for(1===u[r-1]&&(--f[0],++p[r-1]),n=r-2;n>=0;--n){for(i=0,s=0,o=p[n+1],a=0;a<h[n];a++)(s=c[n+1][o]+c[n+1][o+1])>t[i]?(c[n][a]=s,l[n][a]=e,o+=2):(c[n][a]=t[i],l[n][a]=i,++i);p[n]=0,1===u[n]&&w(n)}return f},f.RawDeflate.prototype.getCodesFromLengths_=function(t){var e,r,i,n,a=new Uint16Array(t.length),s=[],o=[],h=0;for(e=0,r=t.length;e<r;e++)s[t[e]]=1+(0|s[t[e]]);for(e=1,r=f.RawDeflate.MaxCodeLength;e<=r;e++)o[e]=h,h+=0|s[e],h<<=1;for(e=0,r=t.length;e<r;e++)for(h=o[t[e]],o[t[e]]+=1,a[e]=0,i=0,n=t[e];i<n;i++)a[e]=a[e]<<1|1&h,h>>>=1;return a},f.Unzip=function(t,e){e=e||{},this.input=t instanceof Array?new Uint8Array(t):t,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=e.verify||!1,this.password=e.password},f.Unzip.CompressionMethod=f.Zip.CompressionMethod,f.Unzip.FileHeaderSignature=f.Zip.FileHeaderSignature,f.Unzip.LocalFileHeaderSignature=f.Zip.LocalFileHeaderSignature,f.Unzip.CentralDirectorySignature=f.Zip.CentralDirectorySignature,f.Unzip.FileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},f.Unzip.FileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==f.Unzip.FileHeaderSignature[0]||t[e++]!==f.Unzip.FileHeaderSignature[1]||t[e++]!==f.Unzip.FileHeaderSignature[2]||t[e++]!==f.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=t[e++],this.os=t[e++],this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.fileCommentLength=t[e++]|t[e++]<<8,this.diskNumberStart=t[e++]|t[e++]<<8,this.internalFileAttributes=t[e++]|t[e++]<<8,this.externalFileAttributes=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,this.relativeOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.comment=t.subarray(e,e+this.fileCommentLength),this.length=e-this.offset},f.Unzip.LocalFileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},f.Unzip.LocalFileHeader.Flags=f.Zip.Flags,f.Unzip.LocalFileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==f.Unzip.LocalFileHeaderSignature[0]||t[e++]!==f.Unzip.LocalFileHeaderSignature[1]||t[e++]!==f.Unzip.LocalFileHeaderSignature[2]||t[e++]!==f.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.length=e-this.offset},f.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var t,e=this.input;for(t=e.length-12;t>0;--t)if(e[t]===f.Unzip.CentralDirectorySignature[0]&&e[t+1]===f.Unzip.CentralDirectorySignature[1]&&e[t+2]===f.Unzip.CentralDirectorySignature[2]&&e[t+3]===f.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=t);throw new Error("End of Central Directory Record not found")},f.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var t,e=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),t=this.eocdrOffset,e[t++]!==f.Unzip.CentralDirectorySignature[0]||e[t++]!==f.Unzip.CentralDirectorySignature[1]||e[t++]!==f.Unzip.CentralDirectorySignature[2]||e[t++]!==f.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=e[t++]|e[t++]<<8,this.startDisk=e[t++]|e[t++]<<8,this.totalEntriesThisDisk=e[t++]|e[t++]<<8,this.totalEntries=e[t++]|e[t++]<<8,this.centralDirectorySize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.centralDirectoryOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.commentLength=e[t++]|e[t++]<<8,this.comment=e.subarray(t,t+this.commentLength)},f.Unzip.prototype.parseFileHeader=function(){var t,e,r,i,n=[],a={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),t=this.centralDirectoryOffset,r=0,i=this.totalEntries;r<i;++r)(e=new f.Unzip.FileHeader(this.input,t)).parse(),t+=e.length,n[r]=e,a[e.filename]=r;if(this.centralDirectorySize<t-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=n,this.filenameToIndex=a}},f.Unzip.prototype.getFileData=function(t,e){e=e||{};var r,i,n,a,s,o,h,u,c=this.input,l=this.fileHeaderList;if(l||this.parseFileHeader(),void 0===l[t])throw new Error("wrong index");if(i=l[t].relativeOffset,(r=new f.Unzip.LocalFileHeader(this.input,i)).parse(),i+=r.length,n=r.compressedSize,0!==(r.flags&f.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!e.password&&!this.password)throw new Error("please set password");for(o=this.createDecryptionKey(e.password||this.password),h=i,u=i+12;h<u;++h)this.decode(o,c[h]);for(h=i+=12,u=i+(n-=12);h<u;++h)c[h]=this.decode(o,c[h])}switch(r.compression){case f.Unzip.CompressionMethod.STORE:a=this.input.subarray(i,i+n);break;case f.Unzip.CompressionMethod.DEFLATE:a=new f.RawInflate(this.input,{index:i,bufferSize:r.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(s=f.CRC32.calc(a),r.crc32!==s))throw new Error("wrong crc: file=0x"+r.crc32.toString(16)+", data=0x"+s.toString(16));return a},f.Unzip.prototype.getFilenames=function(){var t,e,r,i=[];for(this.fileHeaderList||this.parseFileHeader(),t=0,e=(r=this.fileHeaderList).length;t<e;++t)i[t]=r[t].filename;return i},f.Unzip.prototype.decompress=function(t,e){var r;if(this.filenameToIndex||this.parseFileHeader(),void 0===(r=this.filenameToIndex[t]))throw new Error(t+" not found");return this.getFileData(r,e)},f.Unzip.prototype.setPassword=function(t){this.password=t},f.Unzip.prototype.decode=function(t,e){return e^=this.getByte(t),this.updateKeys(t,e),e},f.Unzip.prototype.updateKeys=f.Zip.prototype.updateKeys,f.Unzip.prototype.createDecryptionKey=f.Zip.prototype.createEncryptionKey,f.Unzip.prototype.getByte=f.Zip.prototype.getByte,f.Util.stringToByteArray=function(t){var e,r,i=t.split("");for(e=0,r=i.length;e<r;e++)i[e]=(255&i[e].charCodeAt(0))>>>0;return i},f.Adler32=function(t){return"string"===typeof t&&(t=f.Util.stringToByteArray(t)),f.Adler32.update(1,t)},f.Adler32.update=function(t,e){for(var r,i=65535&t,n=t>>>16&65535,a=e.length,s=0;a>0;){a-=r=a>f.Adler32.OptimizationParameter?f.Adler32.OptimizationParameter:a;do{n+=i+=e[s++]}while(--r);i%=65521,n%=65521}return(n<<16|i)>>>0},f.Adler32.OptimizationParameter=1024,f.BitStream=function(t,e){if(this.index="number"===typeof e?e:0,this.bitindex=0,this.buffer=t instanceof Uint8Array?t:new Uint8Array(f.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},f.BitStream.DefaultBlockSize=32768,f.BitStream.prototype.expandBuffer=function(){var t=this.buffer,e=t.length,r=new Uint8Array(e<<1);return r.set(t),this.buffer=r},f.BitStream.prototype.writeBits=function(t,e,r){var i,n=this.buffer,a=this.index,s=this.bitindex,o=n[a];if(r&&e>1&&(t=e>8?function(t){return f.BitStream.ReverseTable[255&t]<<24|f.BitStream.ReverseTable[t>>>8&255]<<16|f.BitStream.ReverseTable[t>>>16&255]<<8|f.BitStream.ReverseTable[t>>>24&255]}(t)>>32-e:f.BitStream.ReverseTable[t]>>8-e),e+s<8)o=o<<e|t,s+=e;else for(i=0;i<e;++i)o=o<<1|t>>e-i-1&1,8===++s&&(s=0,n[a++]=f.BitStream.ReverseTable[o],o=0,a===n.length&&(n=this.expandBuffer()));n[a]=o,this.buffer=n,this.bitindex=s,this.index=a},f.BitStream.prototype.finish=function(){var t=this.buffer,e=this.index;return this.bitindex>0&&(t[e]<<=8-this.bitindex,t[e]=f.BitStream.ReverseTable[t[e]],e++),t.subarray(0,e)},f.BitStream.ReverseTable=function(){var t,e=new Uint8Array(256);for(t=0;t<256;++t)e[t]=function(t){var e=t,r=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--r;return(e<<r&255)>>>0}(t);return e}(),f.CRC32.calc=function(t,e,r){return f.CRC32.update(t,0,e,r)},f.CRC32.update=function(t,e,r,i){var n=f.CRC32.Table,a="number"===typeof r?r:r=0,s="number"===typeof i?i:t.length;for(e^=4294967295,a=7&s;a--;++r)e=e>>>8^n[255&(e^t[r])];for(a=s>>3;a--;r+=8)e=(e=(e=(e=(e=(e=(e=(e=e>>>8^n[255&(e^t[r])])>>>8^n[255&(e^t[r+1])])>>>8^n[255&(e^t[r+2])])>>>8^n[255&(e^t[r+3])])>>>8^n[255&(e^t[r+4])])>>>8^n[255&(e^t[r+5])])>>>8^n[255&(e^t[r+6])])>>>8^n[255&(e^t[r+7])];return(4294967295^e)>>>0},f.CRC32.single=function(t,e){return(f.CRC32.Table[255&(t^e)]^t>>>8)>>>0},f.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],f.CRC32.Table=new Uint32Array(f.CRC32.Table_),f.Deflate=function(t,e){this.input=t,this.output=new Uint8Array(f.Deflate.DefaultBufferSize),this.compressionType=f.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var r,i={};for(r in!e&&(e={})||"number"===typeof e.compressionType&&(this.compressionType=e.compressionType),e)i[r]=e[r];i.outputBuffer=this.output,this.rawDeflate=new f.RawDeflate(this.input,i)},f.Deflate.DefaultBufferSize=32768,f.Deflate.CompressionType=f.RawDeflate.CompressionType,f.Deflate.compress=function(t,e){return new f.Deflate(t,e).compress()},f.Deflate.prototype.compress=function(){var t,e,r,i,n,a,s,o=0;switch(s=this.output,t=f.CompressionMethod.DEFLATE){case f.CompressionMethod.DEFLATE:e=Math.LOG2E*Math.log(f.RawDeflate.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(r=e<<4|t,s[o++]=r,0,t){case f.CompressionMethod.DEFLATE:switch(this.compressionType){case f.Deflate.CompressionType.NONE:n=0;break;case f.Deflate.CompressionType.FIXED:n=1;break;case f.Deflate.CompressionType.DYNAMIC:n=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return i=n<<6|0,i|=31-(256*r+i)%31,s[o++]=i,a=f.Adler32(this.input),this.rawDeflate.op=o,o=(s=this.rawDeflate.compress()).length,(s=new Uint8Array(s.buffer)).length<=o+4&&(this.output=new Uint8Array(s.length+4),this.output.set(s),s=this.output),(s=s.subarray(0,o+4))[o++]=a>>24&255,s[o++]=a>>16&255,s[o++]=a>>8&255,s[o++]=255&a,s};var l,p,d,b="undefined"!==typeof t&&null!=t.versions&&null!=t.versions.node?r(2111):fetch,w=function(){function t(e){Object(h.a)(this,t),this.file=e}return Object(u.a)(t,[{key:"read",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.file,t.abrupt("return",new Promise((function(t,n){var a=new FileReader;if(a.onload=function(e){t(a.result)},a.onerror=function(t){console.err("Error reading local file "+i.name),n(null,a)},void 0!==e){var s=i.slice(e,e+r);a.readAsArrayBuffer(s)}else a.readAsArrayBuffer(i)})));case 2:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()}]),t}();if("undefined"!==typeof t&&null!=t.versions&&null!=t.versions.node){var m=r(480);l=r(1592),p=l&&m.promisify(l.open),d=l&&m.promisify(l.read)}var g=function(){function t(e){Object(h.a)(this,t),this.path=e.path}return Object(u.a)(t,[{key:"read",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r){var n,a,o,h,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.alloc(r),t.next=3,p(this.path,"r");case 3:return a=t.sent,t.next=6,d(a,n,0,r,e);case 6:return o=t.sent,l.close(a,(function(t){})),h=o.buffer,u=h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength),t.abrupt("return",u);case 11:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()}]),t}(),y="undefined"!==typeof t&&null!=t.versions&&null!=t.versions.node,v=function(){function t(e){var r;Object(h.a)(this,t),this.config=e,this.url=(r=e.path||e.url).includes("//www.dropbox.com")?r.replace("//www.dropbox.com","//dl.dropboxusercontent.com"):r.startsWith("ftp://ftp.ncbi.nlm.nih.gov")?r.replace("ftp://","https://"):r}return Object(u.a)(t,[{key:"read",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r){var i,n,a,h,u,f,c,l,p,d,w;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w=function(){return(w=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!==typeof e){t.next=6;break}return t.next=3,Promise.resolve(e());case 3:return t.abrupt("return",t.sent);case 6:return t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)},d=function(t){return w.apply(this,arguments)},r=Math.ceil(r),i=this.config.headers||{},n="bytes="+e+"-"+(e+r-1),i.Range=n,a=this.url.slice(),y?i["User-Agent"]="straw":(this.config.oauthToken&&(h=d(this.config.oauthToken),i.Authorization="Bearer ".concat(h)),0==navigator.vendor.indexOf("Apple")&&/\sSafari\//.test(navigator.userAgent),u=navigator.userAgent.indexOf("Chrome")>-1,f=this.url.indexOf("X-Amz-Signature")>-1,u&&!f&&(a=k(a,"randomSeed",Math.random().toString(36)))),this.config.apiKey&&(a=k(a,"key",this.config.apiKey)),t.next=11,b(a,{method:"GET",headers:i,redirect:"follow",mode:"cors"});case 11:if(c=t.sent,!((l=c.status)>=400)){t.next=20;break}throw console.error("".concat(l,"  ").concat(this.config.url)),(p=Error(c.statusText)).code=l,p;case 20:return t.abrupt("return",c.arrayBuffer());case 21:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()}]),t}();function k(t,e,r){var i=t.includes("?")?"&":"?";return t+i+e+"="+r}var x=function(){function t(e,r){Object(h.a)(this,t),this.file=e,this.rateLimiter=r}return Object(u.a)(t,[{key:"read",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r){var i,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.file,n=this.rateLimiter,t.abrupt("return",new Promise((function(t,a){n.limiter(function(){var i=Object(o.a)(s.a.mark((function i(n){var o;return s.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,n.read(e,r);case 3:o=i.sent,t(o),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),a(i.t0);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})));return function(t){return i.apply(this,arguments)}}())(i)})));case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()}]),t}(),I=function(){function t(e){Object(h.a)(this,t),this.wait=void 0===e?100:e,this.isCalled=!1,this.calls=[]}return Object(u.a)(t,[{key:"limiter",value:function(t){var e=this,r=function t(){e.calls.length&&!e.isCalled&&(e.isCalled=!0,e.calls.shift().call(),setTimeout((function(){e.isCalled=!1,t()}),e.wait))};return function(){e.calls.push(t.bind.apply(t,[this].concat(Array.prototype.slice.call(arguments)))),r()}}}]),t}(),R=function(){function t(e){Object(h.a)(this,t),this.file=e.file,this.size=e.size||64e3,this.position=0,this.bufferStart=0,this.bufferLength=0,this.buffer=void 0}return Object(u.a)(t,[{key:"read",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r){var i,n,a,o,h,u,f,c,l,p,d,b,w,m,g;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e,n=e+r,a=this.bufferStart,o=this.bufferStart+this.bufferLength,!(r>this.size)){t.next=9;break}return this.buffer=void 0,this.bufferStart=0,this.bufferLength=0,t.abrupt("return",this.file.read(e,r));case 9:if(!(i>=a&&n<=o)){t.next=15;break}return u=(h=i-a)+r,t.abrupt("return",this.buffer.slice(h,u));case 15:if(!(i<a&&n>a)){t.next=29;break}return f=a-i,t.next=19,this.file.read(e,f);case 19:if(c=t.sent,!((l=r-f)>0)){t.next=26;break}return p=this.buffer.slice(0,l),t.abrupt("return",S(c,p));case 26:return t.abrupt("return",c);case 27:t.next=63;break;case 29:if(!(i<o&&n>o)){t.next=57;break}if(d=o-i,b=this.bufferLength-d,w=this.buffer.slice(b,this.bufferLength),!((m=r-d)>0)){t.next=54;break}return t.prev=35,t.next=38,this.file.read(o,this.size);case 38:return this.buffer=t.sent,this.bufferStart=o,this.bufferLength=this.buffer.byteLength,g=this.buffer.slice(0,m),t.abrupt("return",S(w,g));case 45:if(t.prev=45,t.t0=t.catch(35),!t.t0.code||416!==t.t0.code){t.next=51;break}return t.abrupt("return",w);case 51:throw t.t0;case 52:t.next=55;break;case 54:return t.abrupt("return",w);case 55:t.next=63;break;case 57:return t.next=59,this.file.read(e,this.size);case 59:return this.buffer=t.sent,this.bufferStart=e,this.bufferLength=this.buffer.byteLength,t.abrupt("return",this.buffer.slice(0,r));case 63:case"end":return t.stop()}}),t,this,[[35,45]])})));return function(e,r){return t.apply(this,arguments)}}()}]),t}(),S=function(t,e){var r=new Uint8Array(t.byteLength+e.byteLength);return r.set(new Uint8Array(t),0),r.set(new Uint8Array(e),t.byteLength),r.buffer},D=function(t,e){this.littleEndian=void 0===e||e,this.position=0,this.view=t,this.length=t.byteLength};function C(t,e){this.block=t,this.offset=e}D.prototype.available=function(){return this.length-this.position},D.prototype.remLength=function(){return this.length-this.position},D.prototype.hasNext=function(){return this.position<this.length-1},D.prototype.getByte=function(){var t=this.view.getUint8(this.position,this.littleEndian);return this.position++,t},D.prototype.getShort=function(){var t=this.view.getInt16(this.position,this.littleEndian);return this.position+=2,t},D.prototype.getUShort=function(){var t=this.view.getUint16(this.position,this.littleEndian);return this.position+=2,t},D.prototype.getInt=function(){var t=this.view.getInt32(this.position,this.littleEndian);return this.position+=4,t},D.prototype.getUInt=function(){var t=this.view.getUint32(this.position,this.littleEndian);return this.position+=4,t},D.prototype.getLong=function(){var t=[];t[0]=this.view.getUint8(this.position),t[1]=this.view.getUint8(this.position+1),t[2]=this.view.getUint8(this.position+2),t[3]=this.view.getUint8(this.position+3),t[4]=this.view.getUint8(this.position+4),t[5]=this.view.getUint8(this.position+5),t[6]=this.view.getUint8(this.position+6),t[7]=this.view.getUint8(this.position+7);var e=0;if(this.littleEndian)for(var r=t.length-1;r>=0;r--)e=256*e+t[r];else for(r=0;r<t.length;r++)e=256*e+t[r];return this.position+=8,e},D.prototype.getString=function(t){for(var e,r="";0!=(e=this.view.getUint8(this.position++))&&(r+=String.fromCharCode(e),!t||r.length!=t););return r},D.prototype.getFixedLengthString=function(t){var e,r,i="";for(e=0;e<t;e++)(r=this.view.getUint8(this.position++))>0&&(i+=String.fromCharCode(r));return i},D.prototype.getFixedLengthTrimmedString=function(t){var e,r,i="";for(e=0;e<t;e++)(r=this.view.getUint8(this.position++))>32&&(i+=String.fromCharCode(r));return i},D.prototype.getFloat=function(){var t=this.view.getFloat32(this.position,this.littleEndian);return this.position+=4,t},D.prototype.getDouble=function(){var t=this.view.getFloat64(this.position,this.littleEndian);return this.position+=8,t},D.prototype.skip=function(t){return this.position+=t,this.position},D.prototype.getVPointer=function(){var t=this.position,e=this.view.getUint8(t+1)<<8|this.view.getUint8(t),r=4294967296*(255&this.view.getUint8(t+6))+16777216*(255&this.view.getUint8(t+5))+65536*(255&this.view.getUint8(t+4))+256*(255&this.view.getUint8(t+3))+(255&this.view.getUint8(t+2));return this.position+=8,new C(r,e)},C.prototype.isLessThan=function(t){return this.block<t.block||this.block===t.block&&this.offset<t.offset},C.prototype.isGreaterThan=function(t){return this.block>t.block||this.block===t.block&&this.offset>t.offset},C.prototype.print=function(){return this.block+":"+this.offset};var B=function(){function t(e,r){Object(h.a)(this,t),this.chr1=e,this.chr2=r}return Object(u.a)(t,[{key:"getKey",value:function(){return this.chr1.name+"_"+this.chr2.name+"_"+this.zoom.unit+"_"+this.zoom.binSize}},{key:"getBlockNumbers",value:function(t,e,r){if(t.chr==this.chr2&&e.chr===this.chr1){var i=t;t=e,e=i}var n=this.chr1===this.chr2,a=this.zoom.binSize,s=this.blockBinCount,o=this.blockColumnCount;return r<9||!n?function(){for(var r=t.start/a,i=t.end/a,h=e.start/a,u=e.end/a,f=Math.floor(r/s),c=Math.floor((i-1)/s),l=Math.floor(h/s),p=Math.floor((u-1)/s),d=[],b=l;b<=p;b++)for(var w=f;w<=c;w++){var m=void 0;m=n&&b<w?w*o+b:b*o+w,d.includes(m)||d.push(m)}return d}():function(){for(var r=t.start/a,i=t.end/a,n=e.start/a,h=e.end/a,u=Math.floor((r+n)/2/s),f=Math.floor((i+h)/2/s),c=Math.floor(Math.log2(1+Math.abs(r-h)/Math.sqrt(2)/s)),l=Math.floor(Math.log2(1+Math.abs(i-n)/Math.sqrt(2)/s)),p=(i-n)*(r-h)<0?0:Math.min(c,l),d=Math.max(c,l),b=[],w=p;w<=d;w++)for(var m=u;m<=f;m++){var g=w*o+m;b.push(g)}return b}()}}],[{key:"parseMatrixZoomData",value:function(e,r,i){var n=new t(e,r),a=i.getString(),s=i.getInt(),o=i.getFloat(),h=i.getFloat(),u=i.getFloat(),f=i.getFloat(),c=i.getInt();n.blockBinCount=i.getInt(),n.blockColumnCount=i.getInt();var l=i.getInt();n.zoom={index:s,unit:a,binSize:c},n.blockIndex=new T(l,i);var p=o/(e.size/c)/(r.size/c);return n.averageCount=p,n.sumCounts=o,n.stdDev=u,n.occupiedCellCount=h,n.percent95=f,n}}]),t}(),T=function(){function t(e,r){for(Object(h.a)(this,t),this.blockIndex={};e-- >0;){var i=r.getInt(),n=r.getLong(),a=r.getInt();this.blockIndex[i]={filePosition:n,size:a}}}return Object(u.a)(t,[{key:"getBlockIndexEntry",value:function(t){return this.blockIndex[t]}}]),t}(),E=function(){function t(e,r,i){Object(h.a)(this,t),this.chr1=e,this.chr2=r,this.bpZoomData=[],this.fragZoomData=[];var a,s=Object(n.a)(i);try{for(s.s();!(a=s.n()).done;){var o=a.value;"BP"===o.zoom.unit?this.bpZoomData.push(o):this.fragZoomData.push(o)}}catch(u){s.e(u)}finally{s.f()}}return Object(u.a)(t,[{key:"findZoomForResolution",value:function(t,e){for(var r="FRAG"===e?this.fragZoomData:this.bpZoomData,i=1;i<r.length;i++){if(r[i].zoom.binSize<t)return i-1}return r.length-1}},{key:"getZoomData",value:function(t,e){for(var r="BP"===(e=e||"BP")?this.bpZoomData:this.fragZoomData,i=0;i<r.length;i++){var n=r[i];if(t===n.zoom.binSize)return n}}},{key:"getZoomDataByIndex",value:function(t,e){return("FRAG"===e?this.fragZoomData:this.bpZoomData)[t]}}],[{key:"getKey",value:function(t,e){if(t>e){var r=t;t=e,e=r}return"".concat(t,"_").concat(e)}},{key:"parseMatrix",value:function(e,r){for(var i=new D(new DataView(e)),n=i.getInt(),a=i.getInt(),s=r[n],o=r[a],h=i.getInt(),u=[];h-- >0;){var f=B.parseMatrixZoomData(s,o,i);u.push(f)}return new t(n,a,u)}}]),t}(),L=function(){function t(e,r,i){Object(h.a)(this,t),this.bin1=e,this.bin2=r,this.counts=i}return Object(u.a)(t,[{key:"getKey",value:function(){return this.bin1+"_"+this.bin2}}]),t}(),O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;Object(h.a)(this,t),this.max=e,this.map=new Map}return Object(u.a)(t,[{key:"get",value:function(t){var e=this.map.get(t);return e&&(this.map.delete(t),this.map.set(t,e)),e}},{key:"set",value:function(t,e){this.map.has(t)?this.map.delete(t):this.map.size===this.max&&this.map.delete(this.first()),this.map.set(t,e)}},{key:"has",value:function(t){return this.map.has(t)}},{key:"clear",value:function(){this.map.clear()}},{key:"first",value:function(){return this.map.keys().next().value}}]),t}(),A=function(){function t(e,r,i,n){Object(h.a)(this,t),this.file=e,this.filePosition=r,this.nValues=i,this.dataType=n,this.cache=void 0}return Object(u.a)(t,[{key:"getValues",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r){var i,n,a,o,h,u,f,c,l,p,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!this.cache||e<this.cache.start||r>this.cache.end)){t.next=15;break}return i=Math.max(0,e-1e3),n=Math.min(this.nValues,r+1e3),a=this.filePosition+i*this.dataType,h=(o=n-i)*this.dataType,t.next=8,this.file.read(a,h);case 8:if(u=t.sent){t.next=11;break}return t.abrupt("return",void 0);case 11:for(f=new D(new DataView(u)),c=[],l=0;l<o;l++)c[l]=8===this.dataType?f.getDouble():f.getFloat();this.cache={start:i,end:n,values:c};case 15:return p=e-this.cache.start,d=p+(r-e),t.abrupt("return",this.cache.values.slice(p,d));case 18:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getKey",value:function(){return t.getKey(this.type,this.chrIdx,this.unit,this.resolution)}}],[{key:"getNormalizationVectorKey",value:function(t,e,r,i){return t+"_"+e+"_"+r+"_"+i}}]),t}(),z="undefined"!==typeof t&&null!=t.versions&&null!=t.versions.node,F=new I(100),M=function(){function t(e){if(Object(h.a)(this,t),this.config=e,this.loadFragData=e.loadFragData,this.fragmentSitesCache={},this.normVectorCache=new O(10),this.normalizationTypes=["NONE"],this.matrixCache=new O(10),this.blockCache=new _,e.file)this.file=e.file;else if(e.blob)this.file=new w(e.blob);else if(e.url||e.path&&!z){this.url=e.url||this.path,this.remote=!0;var r=new v(e);(i=this.url).indexOf("drive.google.com")>=0||i.indexOf("www.googleapis.com/drive")>0?this.file=new x(r,F):this.file=r}else{if(!e.path)throw Error("Arguments must include file, blob, url, or path");this.file=new g({path:e.path})}var i}return Object(u.a)(t,[{key:"init",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,this.readHeaderAndFooter();case 6:this.initialized=!0;case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getVersion",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==this.version){t.next=12;break}return t.next=3,this.file.read(0,128);case 3:if(e=t.sent){t.next=6;break}return t.abrupt("return",void 0);case 6:return r=new D(new DataView(e)),this.magic=r.getString(),this.version=r.getInt(),t.abrupt("return",this.version);case 12:return t.abrupt("return",this.version);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getMetaData",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",this.meta);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"readHeaderAndFooter",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e,r,i,n,a,o,h,u,f,c,l,p,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.file.read(0,16);case 2:if((e=t.sent)&&0!==e.byteLength){t.next=5;break}throw Error("File content is empty");case 5:if(r=new D(new DataView(e)),this.magic=r.getString(),this.version=r.getInt(),!(this.version<5)){t.next=10;break}throw Error("Unsupported hic version: "+this.version);case 10:return this.footerPosition=r.getLong(),t.next=13,this.readFooter();case 13:return i=Object.values(this.masterIndex).reduce((function(t,e){return Math.min(t,e.start)}),Number.MAX_VALUE),n=i-16,t.next=17,this.file.read(16,n);case 17:for(e=t.sent,r=new D(new DataView(e)),this.genomeId=r.getString(),this.version>=9&&(this.normVectorIndexPosition=r.getLong(),this.normVectorIndexSize=r.getLong()),this.attributes={},a=r.getInt();a-- >0;)this.attributes[r.getString()]=r.getString();for(this.chromosomes=[],this.chromosomeIndexMap={},o=r.getInt(),h=0;o-- >0;)"all"===(u={index:h,name:r.getString(),size:this.version<9?r.getInt():r.getLong()}).name.toLowerCase()&&(this.wholeGenomeChromosome=u,this.wholeGenomeResolution=Math.round(2*u.size)),this.chromosomes.push(u),this.chromosomeIndexMap[u.name]=u.index,h++;for(this.bpResolutions=[],f=r.getInt();f-- >0;)this.bpResolutions.push(r.getInt());if(this.loadFragData&&(this.fragResolutions=[],(c=r.getInt())>0))for(;c-- >0;)this.fragResolutions.push(r.getInt());for(this.chrAliasTable={},l=0,p=Object.keys(this.chromosomeIndexMap);l<p.length;l++)(d=p[l]).startsWith("chr")?this.chrAliasTable[d.substr(3)]=d:"MT"===d?this.chrAliasTable.chrM=d:this.chrAliasTable["chr"+d]=d;this.meta={version:this.version,genome:this.genomeId,chromosomes:this.chromosomes,resolutions:this.bpResolutions};case 36:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"readFooter",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e,r,i,n,a,o,h,u,f,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.version<9?8:12,t.next=3,this.file.read(this.footerPosition,e);case 3:if(r=t.sent){t.next=6;break}return t.abrupt("return",null);case 6:return i=new D(new DataView(r)),n=this.version<9?i.getInt():i.getLong(),a=i.getInt(),o=196*a,t.next=12,this.file.read(this.footerPosition+e,Math.min(o,n));case 12:for(r=t.sent,i=new D(new DataView(r)),this.masterIndex={};a-- >0;)h=i.getString(),u=i.getLong(),f=i.getInt(),this.masterIndex[h]={start:u,size:f};return this.expectedValueVectors={},this.version>5&&(c=this.version<9?4:8,this.normExpectedValueVectorsPosition=this.footerPosition+c+n),t.abrupt("return",this);case 19:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"printIndexStats",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e,r,i,n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 0,e=0,t.next=4,this.init();case 4:for(r=0,i=Object.keys(this.masterIndex);r<i.length;r++)n=i[r],a=this.masterIndex[n],a.size,a.size>e&&(e=a.size);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getMatrix",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r){var i,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=E.getKey(e,r),!this.matrixCache.has(i)){t.next=5;break}return t.abrupt("return",this.matrixCache.get(i));case 5:return t.next=7,this.readMatrix(e,r);case 7:return n=t.sent,this.matrixCache.set(i,n),t.abrupt("return",n);case 10:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"readMatrix",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r){var i,n,a,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:if(e>r&&(i=e,e=r,r=i),n=E.getKey(e,r),a=this.masterIndex[n]){t.next=7;break}return t.abrupt("return",void 0);case 7:return t.next=9,this.file.read(a.start,a.size);case 9:if(o=t.sent){t.next=12;break}return t.abrupt("return",void 0);case 12:return t.abrupt("return",E.parseMatrix(o,this.chromosomes));case 13:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getContactRecords",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r,i,a,o){var h,u,f,c,l,p,d,b,w,m,g,y,v,k,x,I,R,S,D,C,B,T,E,O,A,z,F,M,U,N,_,H=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=H.length>5&&void 0!==H[5]&&H[5],t.next=3,this.init();case 3:return u=this.chromosomeIndexMap[this.getFileChrName(r.chr)],f=this.chromosomeIndexMap[this.getFileChrName(i.chr)],(u>f||u===f&&r.start>=i.end)&&(c=r,r=i,i=c),t.next=9,this.getBlocks(r,i,a,o);case 9:if((l=t.sent)&&0!==l.length){t.next=12;break}return t.abrupt("return",[]);case 12:p=[],d=r.start/o,b=r.end/o,w=i.start/o,m=i.end/o,g=Math.floor(d),y=Math.ceil(b),v=Math.floor(w),k=Math.ceil(m),x=Object(n.a)(l),t.prev=22,x.s();case 24:if((I=x.n()).done){t.next=58;break}if(!(R=I.value)){t.next=56;break}if(S=void 0,D=void 0,C=e&&"NONE"!==e,B=this.getFileChrName(r.chr),T=this.getFileChrName(i.chr),!C){t.next=54;break}return t.next=35,this.getNormalizationVector(e,B,a,o);case 35:if(E=t.sent,B!==T){t.next=40;break}t.t0=E,t.next=43;break;case 40:return t.next=42,this.getNormalizationVector(e,T,a,o);case 42:t.t0=t.sent;case 43:if(O=t.t0,!E||!O){t.next=53;break}return t.next=47,E.getValues(g,y);case 47:return S=t.sent,t.next=50,O.getValues(v,k);case 50:D=t.sent,t.next=54;break;case 53:C=!1;case 54:A=Object(n.a)(R.records);try{for(A.s();!(z=A.n()).done;)F=z.value,(h||F.bin1>=d&&F.bin1<b&&F.bin2>=w&&F.bin2<m)&&(C?(M=F.bin1,U=F.bin2,0===(N=S[M-g]*D[U-v])||isNaN(N)||(_=F.counts/N,p.push(new L(M,U,_)))):p.push(F))}catch(s){A.e(s)}finally{A.f()}case 56:t.next=24;break;case 58:t.next=63;break;case 60:t.prev=60,t.t1=t.catch(22),x.e(t.t1);case 63:return t.prev=63,x.f(),t.finish(63);case 66:return t.abrupt("return",p);case 67:case"end":return t.stop()}}),t,this,[[22,60,63,66]])})));return function(e,r,i,n,a){return t.apply(this,arguments)}}()},{key:"getBlocks",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r,i,a){var o,h,u,f,c,l,p,d,b,w,m,g,y,v,k,x,I,R,S=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:if(o=this.getFileChrName(e.chr),h=this.getFileChrName(r.chr),u=this.chromosomeIndexMap[o],f=this.chromosomeIndexMap[h],void 0!==u){t.next=8;break}return t.abrupt("return",[]);case 8:if(void 0!==f){t.next=10;break}return t.abrupt("return",[]);case 10:return t.next=12,this.getMatrix(u,f);case 12:if(c=t.sent){t.next=15;break}return t.abrupt("return",[]);case 15:if(l=c.getZoomData(a,i)){t.next=19;break}throw p="No data avalailble for resolution: ".concat(a,"  for map ").concat(e.chr,"-").concat(r.chr),new Error(p);case 19:d=l.getBlockNumbers(e,r,this.version),b=[],w=[],m=Object(n.a)(d);try{for(m.s();!(g=m.n()).done;)y=g.value,this.blockCache.has(a,y)?b.push(this.blockCache.get(a,y)):w.push(y)}catch(s){m.e(s)}finally{m.f()}return v=w.map((function(t){return S.readBlock(t,l)})),t.next=27,Promise.all(v);case 27:k=t.sent,x=Object(n.a)(k);try{for(x.s();!(I=x.n()).done;)(R=I.value)&&this.blockCache.set(a,R.blockNumber,R)}catch(s){x.e(s)}finally{x.f()}return t.abrupt("return",b.concat(k));case 31:case"end":return t.stop()}}),t,this)})));return function(e,r,i,n){return t.apply(this,arguments)}}()},{key:"readBlock",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r){var i,n,a,o,h,u,c,l,p,d,b,w,m,g,y,v,k,x,I,R,S,C,B,T,E,O,A,z,F,M,U,_,H,j;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.blockIndex.getBlockIndexEntry(e);case 2:if(i=t.sent){t.next=7;break}return t.abrupt("return",void 0);case 7:return t.next=9,this.file.read(i.filePosition,i.size);case 9:if(n=t.sent){t.next=12;break}return t.abrupt("return",void 0);case 12:if(a=new f.Inflate(new Uint8Array(n)),o=a.decompress(),n=o.buffer,h=new D(new DataView(n)),u=h.getInt(),c=[],!(this.version<7)){t.next=22;break}for(l=0;l<u;l++)p=h.getInt(),d=h.getInt(),b=h.getFloat(),c.push(new L(p,d,b));t.next=40;break;case 22:if(w=h.getInt(),m=h.getInt(),g=1===h.getByte(),y=!(this.version<9)&&1==h.getByte(),v=!(this.version<9)&&1==h.getByte(),1!==(k=h.getByte())){t.next=33;break}for(x=v?h.getInt():h.getShort(),I=0;I<x;I++)for(R=v?h.getInt():h.getShort(),S=m+R,C=y?h.getInt():h.getShort(),B=0;B<C;B++)T=y?h.getInt():h.getShort(),E=w+T,O=g?h.getFloat():h.getShort(),c.push(new L(E,S,O));t.next=40;break;case 33:if(2!=k){t.next=39;break}for(A=h.getInt(),z=h.getShort(),F=0;F<A;F++)M=Math.floor(F/z),U=w+(F-M*z),_=m+M,g?(H=h.getFloat(),isNaN(H)||c.push(new L(U,_,H))):-32768!=(j=h.getShort())&&c.push(new L(U,_,j));t.next=40;break;case 39:throw new Error("Unknown block type: "+k);case 40:return t.abrupt("return",new N(e,r,c,i));case 41:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"hasNormalizationVector",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r,i,n){var a,o,h,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return Number.isInteger(r)?a=r:(o=this.getFileChrName(r),a=this.chromosomeIndexMap[o]),h=U(e,a,i.toString(),n),t.next=6,this.getNormVectorIndex();case 6:return u=t.sent,t.abrupt("return",u&&u[h]);case 8:case"end":return t.stop()}}),t,this)})));return function(e,r,i,n){return t.apply(this,arguments)}}()},{key:"getNormalizationVector",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r,i,n){var a,o,h,u,f,c,l,p,d,b,w;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:if(Number.isInteger(r)?a=r:(o=this.getFileChrName(r),a=this.chromosomeIndexMap[o]),h=U(e,a,i.toString(),n),!this.normVectorCache.has(h)){t.next=6;break}return t.abrupt("return",this.normVectorCache.get(h));case 6:return t.next=8,this.getNormVectorIndex();case 8:if(u=t.sent){t.next=11;break}return t.abrupt("return",void 0);case 11:if(f=u[h]){t.next=14;break}return t.abrupt("return",void 0);case 14:return t.next=16,this.file.read(f.filePosition,8);case 16:if(c=t.sent){t.next=19;break}return t.abrupt("return",void 0);case 19:return l=new D(new DataView(c)),p=this.version<9?l.getInt():l.getLong(),d=this.version<9?8:4,b=this.version<9?f.filePosition+4:f.filePosition+8,w=new A(this.file,b,p,d),this.normVectorCache.set(h,w),t.abrupt("return",w);case 26:case"end":return t.stop()}}),t,this)})));return function(e,r,i,n){return t.apply(this,arguments)}}()},{key:"getNormVectorIndex",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e,r,i,n,a,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.version<6)){t.next=2;break}return t.abrupt("return",void 0);case 2:if(this.normVectorIndex){t.next=29;break}if(this.config.nvi||!this.remote||!this.url){t.next=14;break}return e=new URL(this.url),r=encodeURIComponent(e.hostname+e.pathname),t.next=8,b("https://t5dvc6kn3f.execute-api.us-east-1.amazonaws.com/dev/nvi/"+r);case 8:if(200!==(i=t.sent).status){t.next=14;break}return t.next=12,i.text();case 12:(n=t.sent)&&(this.config.nvi=n);case 14:if(!this.config.nvi){t.next=20;break}return a=decodeURIComponent(this.config.nvi).split(","),o={start:parseInt(a[0]),size:parseInt(a[1])},t.abrupt("return",this.readNormVectorIndex(o));case 20:return t.prev=20,t.next=23,this.readNormExpectedValuesAndNormVectorIndex();case 23:return t.abrupt("return",this.normVectorIndex);case 26:t.prev=26,t.t0=t.catch(20),"416"===t.t0.code||416===t.t0.code?this.normExpectedValueVectorsPosition=void 0:console.error(t.t0);case 29:return t.abrupt("return",this.normVectorIndex);case 30:case"end":return t.stop()}}),t,this,[[20,26]])})));return function(){return t.apply(this,arguments)}}()},{key:"getNormalizationOptions",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNormVectorIndex();case 2:return t.abrupt("return",this.normalizationTypes);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"readNormVectorIndex",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var r,i,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return this.normalizationVectorIndexRange=e,t.next=5,this.file.read(e.start,e.size);case 5:for(r=t.sent,i=new D(new DataView(r)),this.normVectorIndex={},n=i.getInt();n-- >0;)this.parseNormVectorEntry(i);return t.abrupt("return",this.normVectorIndex);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"readNormExpectedValuesAndNormVectorIndex",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e,r,i,n,a,h,u,f;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=function(){return(f=Object(o.a)(s.a.mark((function t(i,n){var a,o,h,f;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=new D(new DataView(n));case 1:if(!(i-- >0)){t.next=14;break}if(!(a.available()<100)){t.next=11;break}return i++,r+=a.position,o=Math.max(1e3,30*i),h={start:e+r,size:o},t.next=9,this.file.read(h.start,h.size);case 9:return f=t.sent,t.abrupt("return",u.call(this,i,f));case 11:this.parseNormVectorEntry(a),t.next=1;break;case 14:r+=a.position;case 15:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)},u=function(t,e){return f.apply(this,arguments)},t.next=4,this.init();case 4:if(void 0!==this.normExpectedValueVectorsPosition){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,this.skipExpectedValues(this.normExpectedValueVectorsPosition);case 8:return e=t.sent,r=4,t.next=12,this.file.read(e,4);case 12:if(0!==(i=t.sent).byteLength){t.next=15;break}return t.abrupt("return");case 15:return n=new D(new DataView(i)),a=n.getInt(),h={start:e+r,size:30*a},t.next=21,this.file.read(h.start,h.size);case 21:return i=t.sent,this.normalizedExpectedValueVectors={},this.normVectorIndex={},t.next=26,u.call(this,a,i);case 26:this.config.nvi=e.toString()+","+r;case 27:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"skipExpectedValues",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var r,i,n,a,h,u,f,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=function(){return(c=Object(o.a)(s.a.mark((function t(e,n){var a,o,h,u,c,l,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={start:e,size:500},o=0,h=e,t.next=5,i.read(a.start,a.size);case 5:return u=t.sent,c=new D(new DataView(u)),c.getString(),c.getString(),c.getInt(),l=r<9?c.getInt():c.getLong(),o+=c.position+l*(r<9?8:4),a={start:e+o,size:4},t.next=15,i.read(a.start,a.size);case 15:if(u=t.sent,c=new D(new DataView(u)),p=c.getInt(),o+=4+p*(4+(r<9?8:4)),0!==--n){t.next=24;break}return t.abrupt("return",h+o);case 24:return t.abrupt("return",f(h+o,n));case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)},f=function(t,e){return c.apply(this,arguments)},r=this.version,i=new R({file:this.file,size:256e3}),n={start:e,size:4},t.next=7,i.read(n.start,n.size);case 7:if(a=t.sent,h=new D(new DataView(a)),0!==(u=h.getInt())){t.next=14;break}return t.abrupt("return",e+4);case 14:return t.abrupt("return",f(e+4,u));case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getZoomIndexForBinSize",value:function(t,e){var r;if("BP"===(e=e||"BP"))r=this.bpResolutions;else{if("FRAG"!==e)throw new Error("Invalid unit: "+e);r=this.fragResolutions}for(var i=0;i<r.length;i++)if(r[i]===t)return i;return-1}},{key:"parseNormVectorEntry",value:function(t){var e=t.getString(),r=t.getInt(),i=t.getString(),n=t.getInt(),a=t.getLong(),s=this.version<9?t.getInt():t.getLong(),o=e+"_"+r+"_"+i+"_"+n;this.normalizationTypes.includes(e)||this.normalizationTypes.push(e),this.normVectorIndex[o]={filePosition:a,size:s}}},{key:"getFileChrName",value:function(t){return this.chrAliasTable.hasOwnProperty(t)?this.chrAliasTable[t]:t}}]),t}();function U(t,e,r,i){return t+"_"+e+"_"+r+"_"+i}var N=function t(e,r,i,n){Object(h.a)(this,t),this.blockNumber=e,this.zoomData=r,this.records=i,this.idx=n},_=function(){function t(){Object(h.a)(this,t),this.resolution=void 0,this.map=new O(6)}return Object(u.a)(t,[{key:"set",value:function(t,e,r){this.resolution!==t&&this.map.clear(),this.resolution=t,this.map.set(e,r)}},{key:"get",value:function(t,e){return this.resolution===t?this.map.get(e):void 0}},{key:"has",value:function(t,e){return this.resolution===t&&this.map.has(e)}}]),t}(),H=function(){function t(e){Object(h.a)(this,t),this.config=e,this.hicFile=new M(e)}return Object(u.a)(t,[{key:"getMetaData",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.hicFile.getMetaData();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getContactRecords",value:function(){var t=Object(o.a)(s.a.mark((function t(e,r,i,n,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.hicFile.getContactRecords(e,r,i,n,a));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r,i,n,a){return t.apply(this,arguments)}}()},{key:"getNormalizationOptions",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.hicFile.getNormalizationOptions());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getNVI",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.hicFile.getNormVectorIndex();case 2:return t.abrupt("return",this.hicFile.config.nvi);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"printIndexStats",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.hicFile.printIndexStats();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getFileChrName",value:function(t){return this.hicFile.chrAliasTable.hasOwnProperty(t)?this.hicFile.chrAliasTable[t]:t}}]),t}();e.a=H}).call(this,r(109),r(74).Buffer)},2111:function(t,e,r){"use strict";var i=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof i)return i;throw new Error("unable to locate global object")}();t.exports=e=i.fetch,i.fetch&&(e.default=i.fetch.bind(i)),e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response},2137:function(t,e,r){"use strict";r.r(e),function(t){r.d(e,"openFilehandleWrapper",(function(){return m})),r.d(e,"default",(function(){return g}));var i=r(60),n=r(16),a=r(17),s=r(5),o=r.n(s),h=r(12),u=r(13),f=r(15),c=r(53),l=r(75),p=r(80),d=r(4),b=r(2110),w=function(){function e(t){Object(u.a)(this,e),this.filehandle=void 0,this.filehandle=t}return Object(f.a)(e,[{key:"read",value:function(){var e=Object(h.a)(o.a.mark((function e(r,i){var n,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.filehandle.read(t.allocUnsafe(i),0,i,r);case 2:return n=e.sent,a=n.buffer,s=n.bytesRead,e.abrupt("return",a.buffer.slice(0,s));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();function m(t){return new w(Object(p.openLocation)(t))}var g=function(t){Object(n.a)(r,t);var e=Object(a.a)(r);function r(t){var i;Object(u.a)(this,r),(i=e.call(this,t)).hic=void 0;var n=Object(d.readConfObject)(t,"hicLocation");return i.hic=new b.a({file:m(n)}),i}return Object(f.a)(r,[{key:"setup",value:function(){var t=Object(h.a)(o.a.mark((function t(e){var r,i,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(e||{}).statusCallback,(i=void 0===r?function(){}:r)("Downloading .hic header"),t.next=4,this.hic.getMetaData();case 4:return n=t.sent,i(""),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getHeader",value:function(){var t=Object(h.a)(o.a.mark((function t(e){var r,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setup(e);case 2:return r=t.sent,r.chromosomes,n=Object(i.a)(r,["chromosomes"]),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getRefNames",value:function(){var t=Object(h.a)(o.a.mark((function t(e){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setup(e);case 2:return r=t.sent,t.abrupt("return",r.chromosomes.map((function(t){return t.name})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getResolution",value:function(){var t=Object(h.a)(o.a.mark((function t(e,r){var i,n,a,s,h;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setup(r);case 2:for(i=t.sent,n=i.resolutions,a=n[n.length-1],s=n.length-1;s>=0;s-=1)(h=n[s])<=2*e&&(a=h);return t.abrupt("return",a);case 7:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getFeatures",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(l.ObservableCreate)(function(){var i=Object(h.a)(o.a.mark((function i(n){var a,s,h,u,f,c,l,p,d;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.refName,s=t.start,h=t.end,u=r.resolution,f=r.bpPerPx,c=void 0===f?1:f,l=r.statusCallback,p=void 0===l?function(){}:l,i.next=4,e.getResolution(c/(u||1e3),r);case 4:return d=i.sent,p("Downloading .hic data"),i.next=8,e.hic.getContactRecords("KR",{start:s,chr:a,end:h},{start:s,chr:a,end:h},"BP",d);case 8:i.sent.forEach((function(t){n.next(t)})),p(""),n.complete();case 12:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}(),r.signal)}},{key:"freeResources",value:function(){}}]),r}(c.BaseFeatureDataAdapter)}.call(this,r(74).Buffer)}});
//# sourceMappingURL=24.3481a912c94ef75a9f78.worker.js.map