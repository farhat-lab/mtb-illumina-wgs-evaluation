(this["webpackJsonp@jbrowse/web"]=this["webpackJsonp@jbrowse/web"]||[]).push([[7],{1323:function(t,e,n){"use strict";var r,u,a,i,o=n(619),s=o(n(876)),f=o(n(1324)),c=o(n(877)),l=o(n(620)),p=o(n(878)),d=n(428).promisify;if(n(2373).isNode){var h=n(879);r=h&&d(h.open),u=h&&d(h.read),a=h&&d(h.fstat),i=h&&d(h.readFile)}var y=function(){function t(e){(0,l.default)(this,t),this.position=0,this.filename=e,this.fd=r(this.filename,"r")}return(0,p.default)(t,[{key:"read",value:function(){var t=(0,c.default)(s.default.mark((function t(e){var n,r,a,i,o=arguments;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:0,r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,null===a&&(this.position,this.position+=r),t.t0=u,t.next=8,this.fd;case 8:return t.t1=t.sent,t.t2=e,t.t3=n,t.t4=r,t.t5=a,t.next=15,(0,t.t0)(t.t1,t.t2,t.t3,t.t4,t.t5);case 15:if(i=t.sent,"object"!==(0,f.default)(i)){t.next=18;break}return t.abrupt("return",i.bytesRead);case 18:return t.abrupt("return",i);case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"readFile",value:function(){var t=(0,c.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i(this.filename));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"stat",value:function(){var t=(0,c.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._stat){t.next=8;break}return t.t0=a,t.next=4,this.fd;case 4:return t.t1=t.sent,t.next=7,(0,t.t0)(t.t1);case 7:this._stat=t.sent;case 8:return t.abrupt("return",this._stat);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}();t.exports=y},1324:function(t,e){function n(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},1325:function(t,e,n){"use strict";(function(e){var r=n(619),u=r(n(876)),a=r(n(877)),i=r(n(620)),o=r(n(878)),s=r(n(1323));function f(t,e){return t.offset+t.lineBytes*Math.floor(e/t.lineLength)+e%t.lineLength}var c=function(){function t(e){var n=e.fasta,r=e.fai,u=e.path,a=e.faiPath,o=e.chunkSizeLimit,f=void 0===o?1e6:o;(0,i.default)(this,t),n?this.fasta=n:u&&(this.fasta=new s.default(u)),r?this.fai=r:a?this.fai=new s.default(a):u&&(this.fai=new s.default("".concat(u,".fai"))),this.chunkSizeLimit=f}return(0,o.default)(t,[{key:"_getIndexes",value:function(){var t=(0,a.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.indexes){t.next=4;break}return t.next=3,this._readFAI();case 3:this.indexes=t.sent;case 4:return t.abrupt("return",this.indexes);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_readFAI",value:function(){var t=(0,a.default)(u.default.mark((function t(){var e,n,r,a,i;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={},n={},t.next=4,this.fai.readFile();case 4:if((r=t.sent)&&r.length){t.next=7;break}throw new Error("No data read from FASTA index (FAI) file");case 7:return a=0,r.toString("utf8").split(/\r?\n/).filter((function(t){return/\S/.test(t)})).forEach((function(t){var r=t.split("\t");if(""!==r[0]){i&&i.name===r[0]||(i={name:r[0],id:a},a+=1);var u={id:i.id,name:r[0],length:+r[1],start:0,end:+r[1],offset:+r[2],lineLength:+r[3],lineBytes:+r[4]};e[u.name]=u,n[u.id]=u}})),t.abrupt("return",{name:e,id:n});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getSequenceNames",value:function(){var t=(0,a.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Object,t.next=3,this._getIndexes();case 3:return t.t1=t.sent.name,t.abrupt("return",t.t0.keys.call(t.t0,t.t1));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getSequenceSizes",value:function(){var t=(0,a.default)(u.default.mark((function t(){var e,n,r,a;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={},t.next=3,this._getIndexes();case 3:for(n=t.sent,r=Object.values(n.id),a=0;a<r.length;a+=1)e[r[a].name]=r[a].length;return t.abrupt("return",e);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getSequenceSize",value:function(){var t=(0,a.default)(u.default.mark((function t(e){var n;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getIndexes();case 2:return n=t.sent,t.abrupt("return",(n.name[e]||{}).length);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"hasReferenceSequence",value:function(){var t=(0,a.default)(u.default.mark((function t(e){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getIndexes();case 2:return t.t0=e,t.abrupt("return",!!t.sent.name[t.t0]);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getResiduesById",value:function(){var t=(0,a.default)(u.default.mark((function t(e,n,r){var a;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getIndexes();case 2:if(t.t0=e,a=t.sent.id[t.t0]){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.abrupt("return",this._fetchFromIndexEntry(a,n,r));case 7:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"getResiduesByName",value:function(){var t=(0,a.default)(u.default.mark((function t(e,n,r){var a;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getIndexes();case 2:if(t.t0=e,a=t.sent.name[t.t0]){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.abrupt("return",this._fetchFromIndexEntry(a,n,r));case 7:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"getSequence",value:function(){var t=(0,a.default)(u.default.mark((function t(){var e=arguments;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getResiduesByName.apply(this,e));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_fetchFromIndexEntry",value:function(){var t=(0,a.default)(u.default.mark((function t(n){var r,a,i,o,s,c,l=arguments;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:0,a=l.length>2?l[2]:void 0,i=a,!(r<0)){t.next=5;break}throw new TypeError("regionStart cannot be less than 0");case 5:if((void 0===i||i>n.length)&&(i=n.length),!(r>=i)){t.next=8;break}return t.abrupt("return","");case 8:if(o=f(n,r),!((s=f(n,i)-o)>this.chunkSizeLimit)){t.next=12;break}throw new Error("data size of ".concat(s.toLocaleString()," bytes exceeded chunk size limit of ").concat(this.chunkSizeLimit.toLocaleString()," bytes"));case 12:return c=e.allocUnsafe(s),t.next=15,this.fasta.read(c,0,s,o);case 15:return c=c.toString("utf8").replace(/\s+/g,""),t.abrupt("return",c);case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();t.exports=c}).call(this,n(107).Buffer)},2367:function(t,e,n){var r=n(2368),u=n(2369),a=n(2370),i=n(2372);t.exports=function(t){return r(t)||u(t)||a(t)||i()}},2368:function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},2369:function(t,e){t.exports=function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},2370:function(t,e,n){var r=n(2371);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},2371:function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},2372:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},2373:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="undefined"!==typeof window&&"undefined"!==typeof window.document,u="object"===("undefined"===typeof self?"undefined":n(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,a="undefined"!==typeof t&&null!=t.versions&&null!=t.versions.node;e.isBrowser=r,e.isWebWorker=u,e.isNode=a,e.isJsDom=function(){return"undefined"!==typeof window&&"nodejs"===window.name||navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")}}).call(this,n(171))},2374:function(t,e,n){"use strict";var r=n(619),u=r(n(620)),a=r(n(2375)),i=r(n(2377)),o=r(n(2379)),s=n(321);function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,o.default)(t);if(e){var u=(0,o.default)(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}var c=function(t){(0,a.default)(n,t);var e=f(n);function n(t){var r,a=t.fasta,i=t.path,o=t.fai,f=t.faiPath,c=t.gzi,l=t.gziPath,p=t.chunkSizeLimit;return(0,u.default)(this,n),r=e.call(this,{fasta:a,path:i,fai:o,faiPath:f,chunkSizeLimit:p}),a&&c?r.fasta=new s.BgzfFilehandle({filehandle:a,gziFilehandle:c}):i&&l&&(r.fasta=new s.BgzfFilehandle({path:i,gziPath:l})),r}return n}(r(n(1325)).default);t.exports=c},2375:function(t,e,n){var r=n(2376);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},2376:function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},2377:function(t,e,n){var r=n(1324),u=n(2378);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?u(t):e}},2378:function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},2379:function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},619:function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},620:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},875:function(t,e,n){"use strict";var r=n(619);Object.defineProperty(e,"__esModule",{value:!0}),e.parseSmallFasta=p,Object.defineProperty(e,"BgzipIndexedFasta",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"IndexedFasta",{enumerable:!0,get:function(){return l.default}}),e.FetchableSmallFasta=void 0;var u=r(n(876)),a=r(n(877)),i=r(n(620)),o=r(n(878)),s=r(n(2367)),f=r(n(1323)),c=r(n(2374)),l=r(n(1325));function p(t){return t.split(">").filter((function(t){return/\S/.test(t)})).map((function(t){var e=t.split("\n"),n=(0,s.default)(e),r=n[0],u=n.slice(1),a=r.split(" "),i=(0,s.default)(a),o=i[0],f=i.slice(1),c=u.join("").replace(/\s/g,"");return{id:o,description:f.join(" "),sequence:c}}))}var d=function(){function t(e){var n=e.fasta,r=e.path;(0,i.default)(this,t),n?this.fasta=n:r&&(this.fasta=new f.default(r)),this.data=this.fasta.readFile().then((function(t){return p(t.toString("utf8"))}))}return(0,o.default)(t,[{key:"fetch",value:function(){var t=(0,a.default)(u.default.mark((function t(e,n,r){var a,i,o;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.data;case 2:if(a=t.sent,i=a.find((function(t){return t.id===e})),o=r-n,i){t.next=7;break}throw new Error("no sequence with id ".concat(e," exists"));case 7:return t.abrupt("return",i.sequence.substr(n,o));case 8:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"getSequenceNames",value:function(){var t=(0,a.default)(u.default.mark((function t(){var e;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.data;case 2:return e=t.sent,t.abrupt("return",e.map((function(t){return t.id})));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}();e.FetchableSmallFasta=d},876:function(t,e,n){t.exports=n(267)},877:function(t,e){function n(t,e,n,r,u,a,i){try{var o=t[a](i),s=o.value}catch(f){return void n(f)}o.done?e(s):Promise.resolve(s).then(r,u)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(u,a){var i=t.apply(e,r);function o(t){n(i,u,a,o,s,"next",t)}function s(t){n(i,u,a,o,s,"throw",t)}o(void 0)}))}}},878:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},879:function(t,e){}}]);
//# sourceMappingURL=7.d20c6865.chunk.js.map