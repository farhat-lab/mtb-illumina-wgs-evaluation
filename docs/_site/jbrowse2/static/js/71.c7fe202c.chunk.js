(this["webpackJsonp@jbrowse/web"]=this["webpackJsonp@jbrowse/web"]||[]).push([[71],{1322:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return m}));var n=a(87),r=a.n(n),c=a(91),s=a(86),u=a(90),i=a(93),o=a(95),f=a(875),p=a(127),b=a(129),v=a(140),h=a(135),d=a(81),w=a(193),j=a.n(w),l=a(442),m=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).fasta=void 0,n.seqCache=new j.a({cache:new l.a({maxSize:200}),fill:function(){var e=Object(c.a)(r.a.mark((function e(t){var a,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.refName,c=t.start,s=t.end,e.abrupt("return",n.fasta.getSequence(a,c,s));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});var u=Object(d.readConfObject)(e,"fastaLocation"),i=Object(d.readConfObject)(e,"faiLocation");if(!u)throw new Error("must provide fastaLocation");if(!i)throw new Error("must provide faiLocation");var o={fasta:Object(b.openLocation)(u),fai:Object(b.openLocation)(i)};return n.fasta=new f.IndexedFasta(o),n}return Object(u.a)(a,[{key:"getRefNames",value:function(){return this.fasta.getSequenceNames()}},{key:"getRegions",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fasta.getSequenceSizes();case 2:return t=e.sent,e.abrupt("return",Object.keys(t).map((function(e){return{refName:e,start:0,end:t[e]}})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFeatures",value:function(e){var t=this,a=e.refName,n=e.start,s=e.end;return Object(v.ObservableCreate)(function(){var e=Object(c.a)(r.a.mark((function e(c){var u,i,o,f,p,b,v,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fasta.getSequenceSize(a);case 2:for(u=e.sent,i=void 0!==u?Math.min(u,s):s,o=[],128e3,p=s+(128e3-s%128e3),b=f=n-n%128e3;b<p;b+=128e3)v={refName:a,start:b,end:b+128e3},o.push(t.seqCache.get(JSON.stringify(v),v));return e.next=11,Promise.all(o);case 11:(d=e.sent.join("").slice(n-f).slice(0,s-n))&&c.next(new h.a({id:"".concat(a," ").concat(n,"-").concat(i),data:{refName:a,start:n,end:i,seq:d}})),c.complete();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"freeResources",value:function(){}}]),a}(p.BaseFeatureDataAdapter)}}]);
//# sourceMappingURL=71.c7fe202c.chunk.js.map